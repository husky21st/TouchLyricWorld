"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{9529:function(e,t,o){o.r(t),o.d(t,{default:function(){return oe}});var i=o(7294),n=o(7113),a=o.n(n),s=o(5671),r=o(3144),u=o(4942),l=o(6841),c=o(6358),h=o(4607),d=o(1729),p=function(){function e(){(0,s.Z)(this,e)}return(0,r.Z)(e,null,[{key:"width",get:function(){return e._width}},{key:"height",get:function(){return e._height}},{key:"wr",get:function(){return e._width/100}},{key:"hr",get:function(){return e._height/100}},{key:"textScale",get:function(){return e._width/2e3}},{key:"initialize",value:function(t,o,i,n){console.log("Manager_init"),e._width=i,e._height=n,e.app=new l.Application({view:t,resolution:window.devicePixelRatio||1,backgroundColor:16317691,autoDensity:!1,antialias:!0,width:i,height:n}),console.log(l.utils.isMobile),c.p8.registerPlugin(h.w),h.w.registerPIXI(l),l.Loader.registerPlugin(d.r),l.TextMetrics.BASELINE_SYMBOL+="\u3042\u307d\uff5c",e.app.ticker.stop(),c.p8.ticker.fps(60),c.p8.ticker.add((function(){e.app.ticker.update()})),e.app.ticker.add(e.update),e._media=o,e._media.style.visibility="hidden",e.ManagerInitSetting()}},{key:"ManagerInitSetting",value:function(){l.Loader.shared.destroy();var e=window.navigator.userAgent.toLowerCase();console.log(e),this.isSafari=!1,-1!=e.indexOf("edge")?console.log("use Edge"):-1!=e.indexOf("chrome")?console.log("use Google Chrome"):-1!=e.indexOf("safari")?(console.log("use Safari"),this.isSafari=!0):-1!=e.indexOf("firefox")?console.log("use FireFox"):-1!=e.indexOf("opera")?console.log("use Opera"):(console.log("undefined"),this.isSafari=!0),this.isSafari&&(l.settings.PREFER_ENV=l.ENV.WEBGL)}},{key:"_onResize",value:function(t,o){e._width=t,e._height=o,e.app.renderer.resize(e.width,e.height),e.currentScene&&e.currentScene.resize(),e.app.render(),setTimeout((function(){window.scrollTo(0,1)}),200)}},{key:"changeScene",value:function(t){e.currentScene&&(console.log("Manager_destroy"),e.app.stage.removeChild(e.currentScene),e.currentScene.destroy()),e.currentScene=t,e.currentScene.alpha=0,e.app.stage.addChild(e.currentScene),c.p8.to(e.currentScene,{pixi:{alpha:1},duration:.3})}},{key:"update",value:function(){e.currentScene&&e.currentScene.update()}}]),e}();(0,u.Z)(p,"app",void 0),(0,u.Z)(p,"currentScene",void 0),(0,u.Z)(p,"_width",void 0),(0,u.Z)(p,"_height",void 0),(0,u.Z)(p,"isSafari",void 0),(0,u.Z)(p,"_media",void 0);var m=o(7326),v=o(9340),T=o(6215),f=o(1120),x=JSON.parse('{"C":["0123456789","abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ",".,:-_=+!&#@()~<>? "],"f":["\u6a2a\u753b\u9762\u63a8\u5968\u3067\u3059","\u30d1\u30bd\u30b3\u30f3\u306e\u5834\u5408\u306f\u753b\u9762\u3092\u6a2a\u306b\u9577\u304f\u3057\u3066\u304b\u3089\u904a\u3093\u3067\u304f\u3060\u3055\u3044","\u306d\u3053\u307f\u3093","\u3064\u307c","\u6b4c\u8a5e\u304c\u7dda\u306e\u3068\u3053\u308d\u307e\u3067\u6765\u305f\u3089\u30bf\u30a4\u30df\u30f3\u30b0\u826f\u304f\u306a\u305e\u308d\u3046\uff01","\u30d3\u30fc\u30c8\u306b\u5408\u308f\u305b\u3066","\u30b9\u30da\u30fc\u30b9\u30ad\u30fc\u3092\u62bc\u3059\u3068 / \u4ed6\u306e\u6307\u3067\u753b\u9762\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068","\u5f97\u70b9\u30a2\u30c3\u30d7\uff01","\u5618\u3082\u672c\u5f53\u3082\u541b\u3060\u304b\u3089-\u771f\u5cf6\u3086\u308d","\u305d\u306e\u5fc3\u306b\u706f\u308b\u8272\u306f-\u30e9\u30c6\u30eb\u30cd","\u590f\u3092\u306a\u305e\u3063\u3066-\u30b7\u30ed\u30af\u30de\u6d88\u3057\u30b4\u30e0","\u5bc6\u304b\u306a\u308b\u4ea4\u4fe1\u66f2-\u6fc1\u8336"]}'),y=[{name:"RocknRoll One",url:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap",metadata:{font:{testString:x.C.join("")+x.f.join("")}}},{name:"fontText",url:"Texts/FontPreloadingText.json"},{name:"leftMiku",url:"DancingMiku/left.png"},{name:"rightMiku",url:"DancingMiku/right.png"},{name:"centerMiku",url:"DancingMiku/center.png"},{name:"mainFlower",url:"Shapes/mainFlower.png"},{name:"frame",url:"Shapes/frame.png"},{name:"roseOrange",url:"Shapes/rose1.png"},{name:"roseSky",url:"Shapes/rose2.png"},{name:"roseMelon",url:"Shapes/rose3.png"},{name:"rosePink",url:"Shapes/rose4.png"},{name:"titlePlayButton",url:"TitleMaterials/playButton.png"},{name:"titleCreditButton",url:"TitleMaterials/creditButton.png"},{name:"title",url:"TitleMaterials/title.png"},{name:"songTitle1",url:"TitleMaterials/songTitle1.png"},{name:"songTitle2",url:"TitleMaterials/songTitle2.png"},{name:"songTitle3",url:"TitleMaterials/songTitle3.png"},{name:"songTitle4",url:"TitleMaterials/songTitle4.png"},{name:"songTitle5",url:"TitleMaterials/songTitle5.png"},{name:"songTitle6",url:"TitleMaterials/songTitle6.png"},{name:"loopBack",url:"Shapes/cycle.svg"},{name:"gamePlayButton",url:"Shapes/play.svg"},{name:"gamePauseButton",url:"Shapes/pause.svg"},{name:"resultText",url:"Shapes/resultText.png"},{name:"twitterLogo",url:"Shapes/twitter.png"}],g=o(7172);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return(0,T.Z)(this,o)}}var B=function(e){(0,v.Z)(o,e);var t=k(o);function o(){var e;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"frame",void 0),(0,u.Z)((0,m.Z)(e),"spaceLine",void 0),(0,u.Z)((0,m.Z)(e),"explainJP1",void 0),(0,u.Z)((0,m.Z)(e),"explainJP2",void 0),(0,u.Z)((0,m.Z)(e),"explainJP3",void 0),(0,u.Z)((0,m.Z)(e),"explainJP4",void 0),(0,u.Z)((0,m.Z)(e),"explainEN1",void 0),(0,u.Z)((0,m.Z)(e),"explainEN2",void 0),(0,u.Z)((0,m.Z)(e),"explainEN3",void 0),(0,u.Z)((0,m.Z)(e),"loadingNow",void 0),(0,u.Z)((0,m.Z)(e),"loadingText",void 0),(0,u.Z)((0,m.Z)(e),"loadingCycle",void 0),(0,u.Z)((0,m.Z)(e),"startButton",void 0),e.frame=l.Sprite.from("frame"),e.addChild(e.frame);var i={width:5,color:1118481,alpha:1,join:l.LINE_JOIN.ROUND,cap:l.LINE_CAP.ROUND};return e.spaceLine=(new l.Graphics).lineStyle(i).moveTo(100,400).lineTo(1500,400),e.addChild(e.spaceLine),e.explainJP1=new l.BitmapText("\u6b4c\u8a5e\u304c\u7dda\u306e\u3068\u3053\u308d\u307e\u3067\u6765\u305f\u3089\u30bf\u30a4\u30df\u30f3\u30b0\u826f\u304f\u306a\u305e\u308d\u3046\uff01",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.explainJP1.anchor.set(.5),e.explainJP1.position.set(800,130),e.addChild(e.explainJP1),e.explainJP2=new l.BitmapText("\u30d3\u30fc\u30c8\u306b\u5408\u308f\u305b\u3066",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.explainJP2.anchor.set(.5),e.explainJP2.position.set(800,220),e.addChild(e.explainJP2),e.explainJP3=new l.BitmapText("\u30b9\u30da\u30fc\u30b9\u30ad\u30fc\u3092\u62bc\u3059\u3068 / \u4ed6\u306e\u6307\u3067\u753b\u9762\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.explainJP3.anchor.set(.5),e.explainJP3.position.set(800,275),e.addChild(e.explainJP3),e.explainJP4=new l.BitmapText("\u5f97\u70b9\u30a2\u30c3\u30d7\uff01",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.explainJP4.anchor.set(.5),e.explainJP4.position.set(800,330),e.addChild(e.explainJP4),e.explainEN1=new l.BitmapText("When the lyrics come to the line, trace them with good timing!",{fontName:"BasicRocknRoll",tint:0,fontSize:42}),e.explainEN1.anchor.set(.5),e.explainEN1.position.set(800,450),e.addChild(e.explainEN1),e.explainEN2=new l.BitmapText("Press the spacebar / Tap the screen with your other finger",{fontName:"BasicRocknRoll",tint:0,fontSize:42}),e.explainEN2.anchor.set(.5),e.explainEN2.position.set(800,540),e.addChild(e.explainEN2),e.explainEN3=new l.BitmapText("on the beat to increase your score!",{fontName:"BasicRocknRoll",tint:0,fontSize:42}),e.explainEN3.anchor.set(.5),e.explainEN3.position.set(800,590),e.addChild(e.explainEN3),e.loadingNow=new l.Container,e.loadingText=new l.BitmapText("Loading",{fontName:"BasicRocknRoll",tint:0,fontSize:64}),e.loadingText.anchor.set(.5),e.loadingText.position.set(780,670),e.loadingNow.addChild(e.loadingText),e.loadingCycle=l.Sprite.from("loopBack"),e.loadingCycle.anchor.set(.5),e.loadingCycle.position.set(960,685),e.loadingCycle.scale.set(.15),e.loadingNow.addChild(e.loadingCycle),e.addChild(e.loadingNow),e.startButton=new l.BitmapText("> Start <",{fontName:"BasicRocknRoll",tint:0,fontSize:64}),e.startButton.anchor.set(.5),e.startButton.position.set(800,670),e.startButton.alpha=0,e.startButton.interactive=!0,e.startButton.buttonMode=!0,e.addChild(e.startButton),e}return o}(l.Container);function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return(0,T.Z)(this,o)}}var b=function(e){(0,v.Z)(o,e);var t=Z(o);function o(){var e;return(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"basedWidth",1920),(0,u.Z)((0,m.Z)(e),"basedHeight",1080),(0,u.Z)((0,m.Z)(e),"PI",Math.PI),e}return(0,r.Z)(o,[{key:"makeLine",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.basedWidth,n=(this.basedHeight,this.PI),a={width:5,color:1118481,alpha:1,join:l.LINE_JOIN.ROUND,cap:l.LINE_CAP.ROUND},s=new l.Graphics;if(0===e){var r=Math.min(t,5);if(r<=0)return void s.destroy();if(o){var u=154.8+25.2*r/5;s.lineStyle(a).arc(1.05*i,.04*i,i,154.8*n/180,n*u/180)}else{var c=180-25.2*r/5;s.lineStyle(a).arc(1.05*i,.04*i,i,180*n/180,n*c/180,!0)}}else if(1===e){var h=Math.min(t,5);if(h<=0)return void s.destroy();if(o){var d=11+26.2*(5-h)/5;s.lineStyle(a).arc(.65*-i,.14*-i,i,37.2*n/180,n*d/180,!0)}else{var p=11+26.2*h/5;s.lineStyle(a).arc(.65*-i,.14*-i,i,11*n/180,n*p/180)}}else if(2===e){var m=Math.min(t,5);if(m<=0)return void s.destroy();if(o){var v=142.8+26.2*m/5;s.lineStyle(a).arc(1.65*i,.14*-i,i,142.8*n/180,n*v/180)}else{var T=169-26.2*m/5;s.lineStyle(a).arc(1.65*i,.14*-i,i,169*n/180,n*T/180,!0)}}else if(3===e){var f=Math.min(t,5);if(f<=0)return void s.destroy();if(o){var x=25.2*(5-f)/5;s.lineStyle(a).arc(.05*-i,.04*i,i,25.2*n/180,n*x/180,!0)}else{var y=25.2*f/5;s.lineStyle(a).arc(.05*-i,.04*i,i,0,n*y/180)}}else if(4===e){var g=Math.min(t,7);if(g<=0)return void s.destroy();if(o){var k=118+39.1*g/7;s.lineStyle(a).arc(.9715*i,.3515*-i,i,118*n/180,n*k/180)}else{var B=157.1-39.1*g/7;s.lineStyle(a).arc(.9715*i,.3515*-i,i,157.1*n/180,n*B/180,!0)}}else if(5===e){var Z=Math.min(t,7);if(Z<=0)return void s.destroy();if(o){var b=62-39.1*Z/7;s.lineStyle(a).arc(.0285*i,.3515*-i,i,62*n/180,n*b/180,!0)}else{var w=22.9+39.1*Z/7;s.lineStyle(a).arc(.0285*i,.3515*-i,i,22.9*n/180,n*w/180)}}else if(6===e){var S=Math.min(t,4);if(S<=0)return void s.destroy();if(o){var L=90+20.8*S/4;s.lineStyle(a).arc(.5*i,.469*-i,i,90*n/180,n*L/180)}else{var _=110.8-20.8*S/4;s.lineStyle(a).arc(.5*i,.469*-i,i,110.8*n/180,n*_/180,!0)}}else if(7===e){var R=Math.min(t,4);if(R<=0)return void s.destroy();if(o){var C=90-20.8*R/4;s.lineStyle(a).arc(.5*i,.469*-i,i,90*n/180,n*C/180,!0)}else{var M=69.2+20.8*R/4;s.lineStyle(a).arc(.5*i,.469*-i,i,69.2*n/180,n*M/180)}}s.alpha=0,this.addChild(s)}}]),o}(l.Container);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return(0,T.Z)(this,o)}}var S=function(e){return Math.floor(Math.random()*e)},L=function(e){(0,v.Z)(o,e);var t=w(o);function o(e,i,n,a,r){var c;(0,s.Z)(this,o),(c=t.call(this))._ScoreText=i,c.allLyricText=n,c._player=a,c.maxVocalAmplitude=r,(0,u.Z)((0,m.Z)(c),"charTextBoxs",void 0),(0,u.Z)((0,m.Z)(c),"phraseTexts",void 0),(0,u.Z)((0,m.Z)(c),"baseWR",6*p.wr);var h=p.wr,d=p.hr,v=p.textScale,T=performance.now(),f=2;l.utils.isMobile.any&&(f=1),l.BitmapFont.from("BasicYuseiMagic",{fontFamily:"Yusei Magic",fill:"#ffffff",fontSize:96},{resolution:f,chars:c.allLyricText});var x=performance.now();return console.log("!!!1st",x-T),c.sortableChildren=!0,c.charTextBoxs=new Array,c.phraseTexts=new Array,c.createTexts(e,h,d,v),c}return(0,r.Z)(o,[{key:"createTexts",value:function(e,t,o,i){for(var n,a=this,s=performance.now(),r=[0,1,10,11,20,21,30,31,40,50,60,70,80,90],u=r.concat([2,3,12,13,22,23,32,33,41,42,51,52,61,71,81,91]),c=u.concat([4,14,24,34,43,53,62,63,64,72,73,74]),h=c.concat([65,75,82,83,84,92]),d=e.firstPhrase,p=new Array,m=0;null!==d;m++){var v=d.charCount,T=S((n=v<5?h:v<10?c:v<16?u:r).length),f=n[T];0!==m&&p[m-1]===f&&(f=n[T=S(n.length)]),p.push(f),d=d.next}console.log(this.maxVocalAmplitude),d=e.firstPhrase;for(var x=0;null!==d;x++){for(var y=d.firstChar,g=function(e){var o=2.7+.6*a._player.getVocalAmplitude(y.startTime)/a.maxVocalAmplitude,n=a._player.getValenceArousal(y.startTime).a+1,s=a._player.getValenceArousal(y.startTime).v+1,r=l.utils.rgb2hex([40*n/256,.82,.5*(s-1.2)+.9375]),u=new l.Container;u.sortableChildren=!0;var c=new l.BitmapText(y.text,{fontName:"BasicYuseiMagic",tint:0,fontSize:64});c.anchor.set(.5,.75),c.scale.set(2.6*i),c.zIndex=100*(x+1)+e,u.addChild(c);var h=new l.BitmapText(y.text,{fontName:"BasicYuseiMagic",tint:r,fontSize:64});h.anchor.set(.5,.75),h.scale.set(i*o),h.zIndex=100*(x+1)+e-1e5,h.alpha=0,u.addChild(h),c.cacheAsBitmap=!1,h.cacheAsBitmap=!1;var d=new l.filters.BlurFilter;d.blur=4,h.filters=[d];var m=(new l.Graphics).beginFill(255).drawCircle(0,0,5*t).endFill();m.alpha=0,u.addChild(m);var v=(new l.Graphics).beginFill(65280).drawCircle(0,0,4*t).endFill();v.alpha=0,u.addChild(v);var T=(new l.Graphics).beginFill(16711680).drawCircle(0,0,3*t).endFill();T.alpha=0,u.addChild(T);var f=(new l.Graphics).beginFill(16711680).drawCircle(0,0,2*t).endFill();f.alpha=0,u.addChild(f);var g=(new l.Graphics).beginFill(16711680).drawCircle(0,0,1*t).endFill();g.alpha=0,u.addChild(g),u.visible=!1,a.addChild(u);var k={TextBox:u,Duration:y.duration+50||50,Place:p[x],PhraseIndexOf:e,Reached:!1,Touched:!1};m.interactive=!0,m.buttonMode=!0,m.on("pointerout",(function(e){a.addScore(e,k)}),a),m.on("pointerover",(function(e){a.addScore(e,k)}),a),m.on("touchstart",(function(e){a.addScore(e,k)}),a),m.on("touchmove",(function(e){a.addScore(e,k)}),a),v.interactive=!0,v.buttonMode=!0,v.on("pointerout",(function(e){a.addScore(e,k)}),a),v.on("pointerover",(function(e){a.addScore(e,k)}),a),v.on("touchstart",(function(e){a.addScore(e,k)}),a),v.on("touchmove",(function(e){a.addScore(e,k)}),a),T.interactive=!0,T.buttonMode=!0,T.on("pointerout",(function(e){a.addScore(e,k)}),a),T.on("pointerover",(function(e){a.addScore(e,k)}),a),T.on("touchstart",(function(e){a.addScore(e,k)}),a),T.on("touchmove",(function(e){a.addScore(e,k)}),a),f.interactive=!0,f.buttonMode=!0,f.on("pointerout",(function(e){a.addScore(e,k)}),a),f.on("pointerover",(function(e){a.addScore(e,k)}),a),f.on("touchstart",(function(e){a.addScore(e,k)}),a),f.on("touchmove",(function(e){a.addScore(e,k)}),a),g.interactive=!0,g.buttonMode=!0,g.on("pointerout",(function(e){a.addScore(e,k)}),a),g.on("pointerover",(function(e){a.addScore(e,k)}),a),g.on("touchstart",(function(e){a.addScore(e,k)}),a),g.on("touchmove",(function(e){a.addScore(e,k)}),a),a.charTextBoxs.push(k),y=y.next},k=0;k<d.charCount;k++)g(k);var B=new l.Container;B.sortableChildren=!0;var Z=new l.BitmapText(d.text,{fontName:"BasicYuseiMagic",tint:16388051,fontSize:68});Z.anchor.set(.5),Z.scale.set(i),Z.zIndex=x,B.addChild(Z);var b=new l.BitmapText(d.text,{fontName:"BasicYuseiMagic",tint:16777215,fontSize:68});b.anchor.set(.495,.495),b.scale.set(i),b.zIndex=x-1e3,B.addChild(b);var w=new l.filters.BlurFilter;w.blur=2,b.filters=[w],B.alpha=0,B.visible=!1,this.addChild(B),this.phraseTexts.push({TextBox:B,Duration:d.duration,NextDuration:d.next?d.next.duration:3e3,PhrasePlace:p[x],PhraseCharCount:d.charCount}),d=d.next}var L=performance.now();console.log("!2nd",L-s)}},{key:"addScore",value:function(e,t){if(t.Reached&&!t.Touched){var o,i,n=e.data.getLocalPosition(e.currentTarget);if(o=n.x,i=n.y,!(Math.sqrt(Math.pow(o,2)+Math.pow(i,2))>this.baseWR))t.TextBox.interactive=!1,t.Touched=!0,t.TextBox.children[0].alpha=1,this._ScoreText.changeScore()}}}]),o}(l.Container);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return(0,T.Z)(this,o)}}var R=function(e){(0,v.Z)(o,e);var t=_(o);function o(){var e;return(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"frame",void 0),(0,u.Z)((0,m.Z)(e),"mikuBG",void 0),(0,u.Z)((0,m.Z)(e),"resultText",void 0),(0,u.Z)((0,m.Z)(e),"twitterLogo",void 0),(0,u.Z)((0,m.Z)(e),"scoreText",void 0),(0,u.Z)((0,m.Z)(e),"scoreNumber",void 0),(0,u.Z)((0,m.Z)(e),"songTitle",void 0),(0,u.Z)((0,m.Z)(e),"songArtist",void 0),(0,u.Z)((0,m.Z)(e),"backToMenu",void 0),(0,u.Z)((0,m.Z)(e),"twitterTag",void 0),(0,u.Z)((0,m.Z)(e),"full",void 0),(0,u.Z)((0,m.Z)(e),"combo",void 0),e.frame=l.Sprite.from("frame"),e.addChild(e.frame),e.mikuBG=l.Sprite.from("DancingMiku/loadResultMiku.png"),e.mikuBG.scale.set(1),e.mikuBG.position.set(50,360),e.addChild(e.mikuBG),e.resultText=l.Sprite.from("resultText"),e.resultText.anchor.set(.5),e.resultText.position.set(810,190),e.addChild(e.resultText),e.twitterLogo=l.Sprite.from("twitterLogo"),e.twitterLogo.scale.set(.04),e.twitterLogo.position.set(1134,690),e.addChild(e.twitterLogo),e.scoreText=new l.BitmapText(" TOTAL SCORE",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:96}),e.scoreText.anchor.set(.5),e.scoreText.position.set(820,340),e.scoreText.alpha=0,e.addChild(e.scoreText),e.scoreNumber=new l.BitmapText(" 0000000",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:96}),e.scoreNumber.anchor.set(.5),e.scoreNumber.position.set(815,470),e.scoreNumber.alpha=0,e.addChild(e.scoreNumber),e.songTitle=new l.BitmapText("First Note",{fontName:"BasicRocknRoll",tint:0,fontSize:42}),e.songTitle.anchor.set(1,0),e.songTitle.position.set(1520,70),e.addChild(e.songTitle),e.songArtist=new l.BitmapText("- blues",{fontName:"BasicRocknRoll",tint:0,fontSize:26}),e.songArtist.anchor.set(1,0),e.songArtist.position.set(1520,120),e.addChild(e.songArtist),e.backToMenu=new l.BitmapText("> Back to Menu <",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.backToMenu.anchor.set(.5),e.backToMenu.position.set(807,650),e.backToMenu.alpha=.5,e.backToMenu.interactive=!0,e.backToMenu.buttonMode=!0,e.backToMenu.on("pointertap",e._backToMenu,(0,m.Z)(e)),e.addChild(e.backToMenu),e.twitterTag=new l.BitmapText("#TouchLyricWorld",{fontName:"BasicRocknRoll",tint:44270,fontSize:36}),e.twitterTag.anchor.set(.5),e.twitterTag.position.set(1350,700),e.addChild(e.twitterTag),e.full=new l.BitmapText("FULL",{fontName:"FullComboRocknRoll",tint:15123490,fontSize:96}),e.full.anchor.set(.4,.5),e.full.position.set(360,600),e.full.angle=-90,e.full.alpha=0,e.addChild(e.full),e.combo=new l.BitmapText("COMBO",{fontName:"FullComboRocknRoll",tint:15123490,fontSize:96}),e.combo.anchor.set(.4,.5),e.combo.position.set(1270,200),e.combo.angle=90,e.combo.alpha=0,e.addChild(e.combo),e}return(0,r.Z)(o,[{key:"_backToMenu",value:function(){window.location.reload()}}]),o}(l.Container),C=function(){function e(t){(0,s.Z)(this,e),this._ScoreText=t,(0,u.Z)(this,"_MoveLyricText",void 0),this._MoveLyricText=new I(this._ScoreText)}return(0,r.Z)(e,[{key:"moveCharText",value:function(e){var t=e.Place,o=e.PhraseIndexOf;0===t?o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<32&&this.moveTextType4(e,o-25,e.Duration,!0):1===t?o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<29&&this.moveTextType6(e,o-25,e.Duration,!0):2===t?o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<16&&this.moveTextType5(e,o-9,e.Duration,!0):3===t?o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<16&&this.moveTextType4(e,o-9,e.Duration,!0):4===t?o<5?this.moveTextType0(e,o,e.Duration):o<10&&this.moveTextType1(e,o-5,e.Duration,!0):10===t?o<5?this.moveTextType3(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<13?this.moveTextType6(e,o-9,e.Duration,!0):o<18?this.moveTextType0(e,o-13,e.Duration,!0):o<25?this.moveTextType4(e,o-18,e.Duration):o<32&&this.moveTextType5(e,o-25,e.Duration,!0):11===t?o<5?this.moveTextType3(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<13?this.moveTextType6(e,o-9,e.Duration,!0):o<18?this.moveTextType0(e,o-13,e.Duration,!0):o<25?this.moveTextType4(e,o-18,e.Duration):o<29&&this.moveTextType7(e,o-25,e.Duration,!0):12===t?o<5?this.moveTextType3(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<16&&this.moveTextType4(e,o-9,e.Duration,!0):13===t?o<5?this.moveTextType3(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<16&&this.moveTextType5(e,o-9,e.Duration,!0):14===t?o<5?this.moveTextType3(e,o,e.Duration):o<10&&this.moveTextType2(e,o-5,e.Duration,!0):20===t?o<5?this.moveTextType1(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<32&&this.moveTextType4(e,o-25,e.Duration,!0):21===t?o<5?this.moveTextType1(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<29&&this.moveTextType6(e,o-25,e.Duration,!0):22===t?o<5?this.moveTextType1(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<16&&this.moveTextType5(e,o-9,e.Duration,!0):23===t?o<5?this.moveTextType1(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<16&&this.moveTextType4(e,o-9,e.Duration,!0):24===t?o<5?this.moveTextType1(e,o,e.Duration):o<10&&this.moveTextType0(e,o-5,e.Duration,!0):30===t?o<5?this.moveTextType2(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<13?this.moveTextType6(e,o-9,e.Duration,!0):o<18?this.moveTextType0(e,o-13,e.Duration,!0):o<25?this.moveTextType4(e,o-18,e.Duration):o<32&&this.moveTextType5(e,o-25,e.Duration,!0):31===t?o<5?this.moveTextType2(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<13?this.moveTextType6(e,o-9,e.Duration,!0):o<18?this.moveTextType0(e,o-13,e.Duration,!0):o<25?this.moveTextType4(e,o-18,e.Duration):o<29&&this.moveTextType7(e,o-25,e.Duration,!0):32===t?o<5?this.moveTextType2(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<16&&this.moveTextType4(e,o-9,e.Duration,!0):33===t?o<5?this.moveTextType2(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<16&&this.moveTextType5(e,o-9,e.Duration,!0):34===t?o<5?this.moveTextType2(e,o,e.Duration):o<10&&this.moveTextType3(e,o-5,e.Duration,!0):40===t?o<7?this.moveTextType4(e,o,e.Duration):o<11?this.moveTextType7(e,o-7,e.Duration,!0):o<16?this.moveTextType3(e,o-11,e.Duration,!0):o<23?this.moveTextType5(e,o-16,e.Duration):o<30&&this.moveTextType4(e,o-23,e.Duration,!0):41===t?o<7?this.moveTextType4(e,o,e.Duration):o<11?this.moveTextType7(e,o-7,e.Duration,!0):o<16?this.moveTextType3(e,o-11,e.Duration,!0):o<23?this.moveTextType5(e,o-16,e.Duration):o<27&&this.moveTextType6(e,o-23,e.Duration,!0):42===t?o<7?this.moveTextType4(e,o,e.Duration):o<11?this.moveTextType7(e,o-7,e.Duration,!0):o<16&&this.moveTextType2(e,o-11,e.Duration,!0):43===t?o<7?this.moveTextType4(e,o,e.Duration):o<14&&this.moveTextType5(e,o-7,e.Duration,!0):50===t?o<7?this.moveTextType5(e,o,e.Duration):o<11?this.moveTextType6(e,o-7,e.Duration,!0):o<16?this.moveTextType0(e,o-11,e.Duration,!0):o<23?this.moveTextType4(e,o-16,e.Duration):o<30&&this.moveTextType5(e,o-23,e.Duration,!0):51===t?o<7?this.moveTextType5(e,o,e.Duration):o<11?this.moveTextType6(e,o-7,e.Duration,!0):o<16?this.moveTextType0(e,o-11,e.Duration,!0):o<23?this.moveTextType4(e,o-16,e.Duration):o<27&&this.moveTextType7(e,o-23,e.Duration,!0):52===t?o<7?this.moveTextType5(e,o,e.Duration):o<11?this.moveTextType6(e,o-7,e.Duration,!0):o<16&&this.moveTextType1(e,o-11,e.Duration,!0):53===t?o<7?this.moveTextType5(e,o,e.Duration):o<14&&this.moveTextType4(e,o-7,e.Duration,!0):60===t?o<4?this.moveTextType6(e,o,e.Duration):o<8?this.moveTextType7(e,o-4,e.Duration,!0):o<13?this.moveTextType3(e,o-8,e.Duration,!0):o<20?this.moveTextType5(e,o-13,e.Duration):o<24?this.moveTextType6(e,o-20,e.Duration,!0):o<29&&this.moveTextType0(e,o-24,e.Duration,!0):61===t?o<4?this.moveTextType6(e,o,e.Duration):o<8?this.moveTextType7(e,o-4,e.Duration,!0):o<13?this.moveTextType3(e,o-8,e.Duration,!0):o<20?this.moveTextType5(e,o-13,e.Duration):o<27&&this.moveTextType4(e,o-20,e.Duration,!0):62===t?o<4?this.moveTextType6(e,o,e.Duration):o<8?this.moveTextType7(e,o-4,e.Duration,!0):o<13&&this.moveTextType2(e,o-8,e.Duration,!0):63===t?o<4?this.moveTextType6(e,o,e.Duration):o<11&&this.moveTextType5(e,o-4,e.Duration,!0):64===t?o<4?this.moveTextType6(e,o,e.Duration):o<11&&this.moveTextType4(e,o-4,e.Duration,!0):65===t?o<5&&this.moveTextType1(e,o,e.Duration,!0):70===t?o<4?this.moveTextType7(e,o,e.Duration):o<8?this.moveTextType6(e,o-4,e.Duration,!0):o<13?this.moveTextType0(e,o-8,e.Duration,!0):o<20?this.moveTextType4(e,o-13,e.Duration):o<24?this.moveTextType7(e,o-20,e.Duration,!0):o<29&&this.moveTextType3(e,o-24,e.Duration,!0):71===t?o<4?this.moveTextType7(e,o,e.Duration):o<8?this.moveTextType6(e,o-4,e.Duration,!0):o<13?this.moveTextType0(e,o-8,e.Duration,!0):o<20?this.moveTextType4(e,o-13,e.Duration):o<27&&this.moveTextType5(e,o-20,e.Duration,!0):72===t?o<4?this.moveTextType7(e,o,e.Duration):o<8?this.moveTextType6(e,o-4,e.Duration,!0):o<13&&this.moveTextType1(e,o-8,e.Duration,!0):73===t?o<4?this.moveTextType7(e,o,e.Duration):o<11&&this.moveTextType4(e,o-4,e.Duration,!0):74===t?o<4?this.moveTextType7(e,o,e.Duration):o<11&&this.moveTextType5(e,o-4,e.Duration,!0):75===t?o<5&&this.moveTextType2(e,o,e.Duration,!0):80===t?o<4?this.moveTextType7(e,o,e.Duration,!0):o<9?this.moveTextType3(e,o-4,e.Duration,!0):o<16?this.moveTextType5(e,o-9,e.Duration):o<20?this.moveTextType6(e,o-16,e.Duration,!0):o<25?this.moveTextType0(e,o-20,e.Duration,!0):o<32&&this.moveTextType4(e,o-25,e.Duration):81===t?o<4?this.moveTextType7(e,o,e.Duration,!0):o<9?this.moveTextType3(e,o-4,e.Duration,!0):o<16?this.moveTextType5(e,o-9,e.Duration):o<23&&this.moveTextType4(e,o-16,e.Duration,!0):82===t?o<4?this.moveTextType7(e,o,e.Duration,!0):o<9&&this.moveTextType2(e,o-4,e.Duration,!0):83===t?o<7&&this.moveTextType5(e,o,e.Duration,!0):84===t?o<7&&this.moveTextType4(e,o,e.Duration,!0):90===t?o<4?this.moveTextType6(e,o,e.Duration,!0):o<9?this.moveTextType0(e,o-4,e.Duration,!0):o<16?this.moveTextType4(e,o-9,e.Duration):o<20?this.moveTextType7(e,o-16,e.Duration,!0):o<25?this.moveTextType3(e,o-20,e.Duration,!0):o<32&&this.moveTextType5(e,o-25,e.Duration):91===t?o<4?this.moveTextType6(e,o,e.Duration,!0):o<9?this.moveTextType0(e,o-4,e.Duration,!0):o<16?this.moveTextType4(e,o-9,e.Duration):o<23&&this.moveTextType5(e,o-16,e.Duration,!0):92===t?o<4?this.moveTextType6(e,o,e.Duration,!0):o<9&&this.moveTextType1(e,o-4,e.Duration,!0):(console.log("%c!PhraseNumber error!","color: red"),o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<32&&this.moveTextType4(e,o-25,e.Duration,!0))}},{key:"moveTextType0",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0;n=i?Math.PI*(180+25.2*(5-t)/5)/180:Math.PI*(180+25.2*t/5)/180,this._MoveLyricText.moveTextBasic(e,o,n,{x:.5,y:-.05},{x:1.05,y:.04})}},{key:"moveTextType1",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0;n=i?Math.PI*(322.8+26.2*t/5)/180:Math.PI*(322.8+26.2*(5-t)/5)/180,this._MoveLyricText.moveTextBasic(e,o,n,{x:-.15,y:0},{x:-.65,y:-.14})}},{key:"moveTextType2",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0;n=i?Math.PI*(191+26.2*(5-t)/5)/180:Math.PI*(191+26.2*t/5)/180,this._MoveLyricText.moveTextBasic(e,o,n,{x:1.15,y:0},{x:1.65,y:-.14})}},{key:"moveTextType3",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0;n=i?Math.PI*(334.8+25.2*t/5)/180:Math.PI*(334.8+25.2*(5-t)/5)/180,this._MoveLyricText.moveTextBasic(e,o,n,{x:.5,y:-.05},{x:-.05,y:.04})}},{key:"moveTextType4",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0;n=i?Math.PI*(202.9+39.1*(7-t)/7)/180:Math.PI*(202.9+39.1*t/7)/180,this._MoveLyricText.moveTextBasic(e,o,n,{x:.5,y:-.05},{x:.9715,y:-.3515})}},{key:"moveTextType5",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0;n=i?Math.PI*(298+39.1*t/7)/180:Math.PI*(298+39.1*(7-t)/7)/180,this._MoveLyricText.moveTextBasic(e,o,n,{x:.5,y:-.05},{x:.0285,y:-.3515})}},{key:"moveTextType6",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0;n=i?Math.PI*(249.2+20.8*(4-t)/4)/180:Math.PI*(249.2+20.8*t/4)/180,this._MoveLyricText.moveTextBasic(e,o,n,{x:.5,y:-.05},{x:.5,y:-.469})}},{key:"moveTextType7",value:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0;n=i?Math.PI*(270+20.8*t/4)/180:Math.PI*(270+20.8*(4-t)/4)/180,this._MoveLyricText.moveTextBasic(e,o,n,{x:.5,y:-.05},{x:.5,y:-.469})}},{key:"movePhraseText",value:function(e,t,o){this._MoveLyricText.movePhraseText(e,t);var i=e.PhrasePlace,n=e.PhraseCharCount-1;0===i?(o.makeLine(0,n),o.makeLine(6,n-5),o.makeLine(7,n-9,!0),o.makeLine(3,n-13,!0),o.makeLine(5,n-18),o.makeLine(4,n-25,!0)):1===i?(o.makeLine(0,n),o.makeLine(6,n-5),o.makeLine(7,n-9,!0),o.makeLine(3,n-13,!0),o.makeLine(5,n-18),o.makeLine(6,n-25,!0)):2===i?(o.makeLine(0,n),o.makeLine(6,n-5),o.makeLine(5,n-9,!0)):3===i?(o.makeLine(0,n),o.makeLine(6,n-5),o.makeLine(4,n-9,!0)):4===i?(o.makeLine(0,n),o.makeLine(1,n-5,!0)):10===i?(o.makeLine(3,n),o.makeLine(7,n-5),o.makeLine(6,n-9,!0),o.makeLine(0,n-13,!0),o.makeLine(4,n-18),o.makeLine(5,n-25,!0)):11===i?(o.makeLine(3,n),o.makeLine(7,n-5),o.makeLine(6,n-9,!0),o.makeLine(0,n-13,!0),o.makeLine(4,n-18),o.makeLine(7,n-25,!0)):12===i?(o.makeLine(3,n),o.makeLine(7,n-5),o.makeLine(4,n-9,!0)):13===i?(o.makeLine(3,n),o.makeLine(7,n-5),o.makeLine(5,n-9,!0)):14===i?(o.makeLine(3,n),o.makeLine(2,n-5,!0)):20===i?(o.makeLine(1,n),o.makeLine(6,n-5),o.makeLine(7,n-9,!0),o.makeLine(3,n-13,!0),o.makeLine(5,n-18),o.makeLine(4,n-25,!0)):21===i?(o.makeLine(1,n),o.makeLine(6,n-5),o.makeLine(7,n-9,!0),o.makeLine(3,n-13,!0),o.makeLine(5,n-18),o.makeLine(6,n-25,!0)):22===i?(o.makeLine(1,n),o.makeLine(6,n-5),o.makeLine(5,n-9,!0)):23===i?(o.makeLine(1,n),o.makeLine(6,n-5),o.makeLine(4,n-9,!0)):24===i?(o.makeLine(1,n),o.makeLine(0,n-5,!0)):30===i?(o.makeLine(2,n),o.makeLine(7,n-5),o.makeLine(6,n-9,!0),o.makeLine(0,n-13,!0),o.makeLine(4,n-18),o.makeLine(5,n-25,!0)):31===i?(o.makeLine(2,n),o.makeLine(7,n-5),o.makeLine(6,n-9,!0),o.makeLine(0,n-13,!0),o.makeLine(4,n-18),o.makeLine(7,n-25,!0)):32===i?(o.makeLine(2,n),o.makeLine(7,n-5),o.makeLine(4,n-9,!0)):33===i?(o.makeLine(2,n),o.makeLine(7,n-5),o.makeLine(5,n-9,!0)):34===i?(o.makeLine(2,n),o.makeLine(3,n-5,!0)):40===i?(o.makeLine(4,n),o.makeLine(7,n-7,!0),o.makeLine(3,n-11,!0),o.makeLine(5,n-16),o.makeLine(4,n-23,!0)):41===i?(o.makeLine(4,n),o.makeLine(7,n-7,!0),o.makeLine(3,n-11,!0),o.makeLine(5,n-16),o.makeLine(6,n-23,!0)):42===i?(o.makeLine(4,n),o.makeLine(7,n-7,!0),o.makeLine(2,n-11,!0)):43===i?(o.makeLine(4,n),o.makeLine(5,n-7,!0)):50===i?(o.makeLine(5,n),o.makeLine(6,n-7,!0),o.makeLine(0,n-11,!0),o.makeLine(4,n-16),o.makeLine(5,n-23,!0)):51===i?(o.makeLine(5,n),o.makeLine(6,n-7,!0),o.makeLine(0,n-11,!0),o.makeLine(4,n-16),o.makeLine(7,n-23,!0)):52===i?(o.makeLine(5,n),o.makeLine(6,n-7,!0),o.makeLine(1,n-11,!0)):53===i?(o.makeLine(5,n),o.makeLine(4,n-7,!0)):60===i?(o.makeLine(6,n),o.makeLine(7,n-4,!0),o.makeLine(3,n-8,!0),o.makeLine(5,n-13),o.makeLine(6,n-20,!0),o.makeLine(0,n-24,!0)):61===i?(o.makeLine(6,n),o.makeLine(7,n-4,!0),o.makeLine(3,n-8,!0),o.makeLine(5,n-13),o.makeLine(4,n-20,!0)):62===i?(o.makeLine(6,n),o.makeLine(7,n-4,!0),o.makeLine(2,n-8,!0)):63===i?(o.makeLine(6,n),o.makeLine(5,n-4,!0)):64===i?(o.makeLine(6,n),o.makeLine(4,n-4,!0)):65===i?o.makeLine(1,n,!0):70===i?(o.makeLine(7,n),o.makeLine(6,n-4,!0),o.makeLine(0,n-8,!0),o.makeLine(4,n-13),o.makeLine(7,n-20,!0),o.makeLine(3,n-24,!0)):71===i?(o.makeLine(7,n),o.makeLine(6,n-4,!0),o.makeLine(0,n-8,!0),o.makeLine(4,n-13),o.makeLine(5,n-20,!0)):72===i?(o.makeLine(7,n),o.makeLine(6,n-4,!0),o.makeLine(1,n-8,!0)):73===i?(o.makeLine(7,n),o.makeLine(4,n-4,!0)):74===i?(o.makeLine(7,n),o.makeLine(5,n-4,!0)):75===i?o.makeLine(2,n,!0):80===i?(o.makeLine(7,n,!0),o.makeLine(3,n-4,!0),o.makeLine(5,n-9),o.makeLine(6,n-16,!0),o.makeLine(0,n-20,!0),o.makeLine(4,n-25)):81===i?(o.makeLine(7,n,!0),o.makeLine(3,n-4,!0),o.makeLine(5,n-9),o.makeLine(4,n-16,!0)):82===i?(o.makeLine(7,n,!0),o.makeLine(2,n-4,!0)):83===i?o.makeLine(5,n,!0):84===i?o.makeLine(4,n,!0):90===i?(o.makeLine(6,n,!0),o.makeLine(0,n-4,!0),o.makeLine(4,n-9),o.makeLine(7,n-16,!0),o.makeLine(3,n-20,!0),o.makeLine(5,n-25)):91===i?(o.makeLine(6,n,!0),o.makeLine(0,n-4,!0),o.makeLine(4,n-9),o.makeLine(5,n-16,!0)):92===i?(o.makeLine(6,n,!0),o.makeLine(1,n-4,!0)):(o.makeLine(0,n),o.makeLine(6,n-5),o.makeLine(7,n-9,!0),o.makeLine(3,n-13,!0),o.makeLine(5,n-18),o.makeLine(4,n-25,!0))}},{key:"startCharPlace",value:function(e){var t=Math.PI,o={x:0,y:0};return 0===e||4===e?(o.x=1.05+Math.cos(t),o.y=.04+Math.sin(t)):1===e||5===e?(o.x=-.05+Math.cos(0),o.y=.04+Math.sin(0)):2===e?(o.x=-.65+Math.cos(11*t/180),o.y=-.14+Math.sin(11*t/180)):3===e?(o.x=1.65+Math.cos(169*t/180),o.y=-.14+Math.sin(169*t/180)):6===e?(o.x=-.65+Math.cos(37.2*t/180),o.y=-.14+Math.sin(37.2*t/180)):7===e?(o.x=1.65+Math.cos(142.8*t/180),o.y=-.14+Math.sin(142.8*t/180)):(o.x=.5+Math.cos(90*t/180),o.y=-.469+Math.sin(90*t/180)),o}}]),e}();function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return(0,T.Z)(this,o)}}var D=function(e){return("0000000"+Math.round(e)).slice(-7)},P=function(e){return("00000"+Math.round(e)).slice(-5)},N=function(e,t){return Math.floor(Math.random()*(t-e)+e)},G=function(e){(0,v.Z)(o,e);var t=M(o);function o(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"phraseLineNumber",void 0),(0,u.Z)((0,m.Z)(e),"isGameNow",void 0),(0,u.Z)((0,m.Z)(e),"fontLoaded",void 0),(0,u.Z)((0,m.Z)(e),"_LoadingGame",void 0),(0,u.Z)((0,m.Z)(e),"_Result",void 0),(0,u.Z)((0,m.Z)(e),"_LyricText",null),(0,u.Z)((0,m.Z)(e),"_BeatSprite",null),(0,u.Z)((0,m.Z)(e),"_ScoreText",null),(0,u.Z)((0,m.Z)(e),"_SomeSprite",void 0),(0,u.Z)((0,m.Z)(e),"_TouchLine",void 0),(0,u.Z)((0,m.Z)(e),"fakeBG",void 0),(0,u.Z)((0,m.Z)(e),"playButton",void 0),(0,u.Z)((0,m.Z)(e),"pauseButton",void 0),(0,u.Z)((0,m.Z)(e),"backToMenu",void 0),(0,u.Z)((0,m.Z)(e),"bg",void 0),(0,u.Z)((0,m.Z)(e),"_player",void 0),(0,u.Z)((0,m.Z)(e),"SONGURL",void 0),(0,u.Z)((0,m.Z)(e),"isFirst",void 0),(0,u.Z)((0,m.Z)(e),"charBuffer",null),(0,u.Z)((0,m.Z)(e),"phraseBuffer",null),(0,u.Z)((0,m.Z)(e),"beatBuffer",null),(0,u.Z)((0,m.Z)(e),"beatDuration",void 0),(0,u.Z)((0,m.Z)(e),"basedScore",void 0),(0,u.Z)((0,m.Z)(e),"bonusScore",void 0),(0,u.Z)((0,m.Z)(e),"beatTouched",void 0),(0,u.Z)((0,m.Z)(e),"beatOnce",void 0),(0,u.Z)((0,m.Z)(e),"maxCombo",void 0),(0,u.Z)((0,m.Z)(e),"_tick",0),(0,u.Z)((0,m.Z)(e),"tickInterval",20),(0,u.Z)((0,m.Z)(e),"_MoveTextTypes",null);var n=p.wr,a=p.hr,r=p.textScale;return e.sortableChildren=!0,e.phraseLineNumber=0,e.isGameNow=!1,e.fontLoaded=!1,e._LoadingGame=new B,e._LoadingGame.pivot.set(800,400),e._LoadingGame.position.set(50*n,50*a),e._LoadingGame.scale.set(.08*a),e._LoadingGame.zIndex=1e4,e.addChild(e._LoadingGame),c.ZP.to(e._LoadingGame.loadingCycle,{pixi:{rotation:-359},duration:2,repeat:-1,ease:"none"}),e._Result=new R,e._Result.pivot.set(800,400),e._Result.position.set(50*n,50*a),e._Result.scale.set(.09*a),e._Result.zIndex=9999,e._Result.alpha=0,e._Result.visible=!1,e.addChild(e._Result),e._SomeSprite=new F(i),e._SomeSprite.zIndex=-9999,e.addChild(e._SomeSprite),e._TouchLine=new b,e._TouchLine.scale.set(100*n/1920,100*a/1080),e.addChild(e._TouchLine),e.bg=(new l.Graphics).beginFill(0).drawRect(0,0,100*n,100*a).endFill(),e.bg.alpha=0,e.bg.zIndex=-10,e.bg.interactive=!0,e.bg.buttonMode=!1,e.bg.visible=!1,e.addChild(e.bg),e.fakeBG=(new l.Graphics).beginFill(0,.3).drawRect(0,0,100*n,100*a).endFill(),e.fakeBG.zIndex=999,e.addChild(e.fakeBG),e.playButton=l.Sprite.from("gamePlayButton"),e.playButton.anchor.set(.5),e.playButton.position.set(50*n,50*a),e.playButton.scale.set(.03*n),e.playButton.alpha=.5,e.playButton.zIndex=1500,e.playButton.interactive=!0,e.playButton.buttonMode=!0,e.playButton.visible=!1,e.playButton.on("pointertap",e._requestPlay,(0,m.Z)(e)),e.addChild(e.playButton),e.pauseButton=l.Sprite.from("gamePauseButton"),e.pauseButton.anchor.set(.5),e.pauseButton.position.set(50*n,2.5*a),e.pauseButton.scale.set(.007*n),e.pauseButton.alpha=.5,e.pauseButton.zIndex=500,e.pauseButton.interactive=!0,e.pauseButton.buttonMode=!0,e.pauseButton.visible=!0,e.pauseButton.on("pointertap",e._requestPause,(0,m.Z)(e)),e.addChild(e.pauseButton),e.backToMenu=new l.BitmapText("Back to Menu",{fontName:"BasicRocknRoll",tint:3355443,fontSize:64}),e.backToMenu.anchor.set(.5),e.backToMenu.position.set(50*n,75*a),e.backToMenu.scale.set(1.4*r),e.backToMenu.interactive=!0,e.backToMenu.buttonMode=!0,e.backToMenu.visible=!1,e.backToMenu.on("pointertap",e._backToMenu,(0,m.Z)(e)),e.addChild(e.backToMenu),e.SONGURL=i,e.isFirst=!0,e._player=new g.J5({app:{token:"Q3ofuMm4ppwyWZfn"},mediaElement:p._media,mediaBannerPosition:null,valenceArousalEnabled:!0,vocalAmplitudeEnabled:!0}),e._player.addListener({onAppReady:function(t){return e._onAppReady(t)},onVideoReady:function(t){return e._onVideoReady(t)},onTimerReady:function(t){return e._onTimerReady(t)},onPlay:function(){return e._onPlay()},onPause:function(){return e._onPause()},onTimeUpdate:function(t){return e._onTimeUpdate(t)}}),e.beatDuration=3e3,e.basedScore=0,e.bonusScore=0,e.beatTouched=!1,e.beatOnce=!1,e.maxCombo=0,e}return(0,r.Z)(o,[{key:"_onAppReady",value:function(e){console.log("%c!AppReady","color: aqua"),e.songUrl||(1===this.SONGURL?this._player.createFromSongUrl("https://piapro.jp/t/FDb1/20210213190029",{video:{beatId:3953882,repetitiveSegmentId:2099561,lyricId:52065,lyricDiffId:5093}}):2===this.SONGURL?this._player.createFromSongUrl("https://www.youtube.com/watch?v=Se89rQPp5tk",{video:{beatId:3953908,repetitiveSegmentId:2099661,lyricId:52061,lyricDiffId:5123}}):3===this.SONGURL?this._player.createFromSongUrl("http://www.youtube.com/watch?v=bMtYf3R0zhY",{video:{beatId:3953902,repetitiveSegmentId:2099660,lyricId:52093,lyricDiffId:5177}}):4===this.SONGURL?this._player.createFromSongUrl("https://www.youtube.com/watch?v=3wbZUkPxHEg",{video:{beatId:3953764,repetitiveSegmentId:2099662,lyricId:52062,lyricDiffId:5133}}):5===this.SONGURL?this._player.createFromSongUrl("http://www.youtube.com/watch?v=Ch4RQPG1Tmo",{video:{beatId:3953917,repetitiveSegmentId:2099665,lyricId:52063,lyricDiffId:5149}}):this._player.createFromSongUrl("https://www.youtube.com/watch?v=pAaD4Hta0ns",{video:{beatId:3953761,repetitiveSegmentId:2099586,lyricId:52094,lyricDiffId:5171}})),this._player.volume=50}},{key:"_onVideoReady",value:function(e){var t=this;console.log("%c!VideoReady","color: aqua"),console.log("v",e);var o=this._player.data.getBeats()[10]||this._player.data.getBeats()[0],i=this._player.getBeats(),n=i[i.length-1];this.beatDuration=o.duration,console.log("beatAveData",o),console.log("lastbeat",n),this._BeatSprite=new O,this._BeatSprite.zIndex=-100,this.addChild(this._BeatSprite),this.maxCombo=e.charCount,this.basedScore=1e6/e.charCount,this.bonusScore=1e4/(n.index+1),this._ScoreText=new z(this.basedScore,this.bonusScore),this.addChild(this._ScoreText),this._MoveTextTypes=new C(this._ScoreText),this.changeStyle(),setTimeout((function(){t.fontLoad(e)}),300)}},{key:"_onTimerReady",value:function(e){var t=this;console.log("%c!TimerReady","color: aqua"),console.log(this._player.data),setTimeout((function(){t.showStartButton()}),300)}},{key:"showStartButton",value:function(){var e=this;c.ZP.timeline().to(this._LoadingGame.loadingNow,{pixi:{alpha:0},duration:.5}).to(this._LoadingGame.startButton,{pixi:{alpha:1},duration:.5,onComplete:function(){e._LoadingGame.startButton.on("pointertap",e.handleStartButton,e)}})}},{key:"handleStartButton",value:function(){var e=this;this.fontLoaded&&c.ZP.timeline().to([this._LoadingGame,this.fakeBG],{pixi:{alpha:0},duration:.3,onComplete:function(){e.startInitSetting()}})}},{key:"startInitSetting",value:function(){var e=this;c.ZP.killTweensOf(this._LoadingGame),this._LoadingGame.visible=!1,this.fakeBG.visible=!1,this.pauseButton.visible=!0,window.addEventListener("keyup",(function(t){e.keyEvent(t)})),this.bg.on("touchstart",this._beatTocuh,this),p._media.style.visibility="visible",console.log("%c!StartGame","color: aqua"),this.playButton.visible=!0}},{key:"_requestPlay",value:function(){var e=this;console.log("REQUESTPLAY"),this.isFirst&&(this.charBuffer=null,this.phraseBuffer=null,this.beatBuffer=null,this.isFirst=!1),setTimeout((function(){e._player.requestPlay()}),100)}},{key:"_requestPause",value:function(){this._player.requestPause()}},{key:"_onPlay",value:function(){this.isFirst||(console.log("%c!Play","color: aqua"),this.hidePauseScreen(),this.isGameNow=!0,this.bg.visible=!0,this.playButton.visible=!1)}},{key:"_onPause",value:function(){this.isFirst||(console.log("%c!Pause","color: aqua"),this._player.video.endTime<this._player.timer.position?(console.log("END"),this.handleResultScreen()):10<this._player.timer.position&&(console.log("NOT END"),this.showPauseScreen()),this.isGameNow=!1,this.bg.visible=!1)}},{key:"showPauseScreen",value:function(){this.fakeBG.alpha=1,this.fakeBG.visible=!0,this.playButton.visible=!0,this.backToMenu.visible=!0}},{key:"hidePauseScreen",value:function(){this.fakeBG.visible=!1,this.playButton.visible=!1,this.backToMenu.visible=!1}},{key:"_onTimeUpdate",value:function(e){if(this._LyricText&&this._BeatSprite){var t=this._player.video.findPhrase(e+2e3);if(t&&t!==this.phraseBuffer){var o=this._player.video.findIndex(t),i=this._LyricText.phraseTexts[o];this.showPhrase(i),this.touchLineAnimation(this._TouchLine.children.slice(this.phraseLineNumber),t.duration),this.showStartCharPlace(i.PhrasePlace),this.phraseBuffer=t}var n=this._player.video.findChar(e+1e3);n&&n!==this.charBuffer&&(this.showChar(n),this.charBuffer=n);var a=this._player.findBeat(e);a&&a!==this.beatBuffer&&(this._BeatSprite.newBeat(a.position-1,a.duration),this.beatBuffer=a,this.beatTouched||this.beatOnce||(this._BeatSprite.iloveMiku.alpha=.3),this.beatOnce=!1);var s=a.progress(e);if(.6<s&&s<.8&&(this.beatTouched=!1),this._tick++,this._tick%this.tickInterval===0){var r=!!this._player.findChorus(e+700);this._SomeSprite.showRose(r),this.tickInterval=r?5:N(10,20),this._tick=0}}}},{key:"showChar",value:function(e){if(this._LyricText&&this._MoveTextTypes){e.previous&&e.previous!==this.charBuffer&&this.showChar(e.previous);var t=this._player.video.findIndex(e),o=this._LyricText.charTextBoxs[t];console.log("V:",t),console.log("char.text",e.text),this._MoveTextTypes.moveCharText(o)}}},{key:"showPhrase",value:function(e){this._MoveTextTypes&&this._MoveTextTypes.movePhraseText(e,this.beatDuration,this._TouchLine)}},{key:"touchLineAnimation",value:function(e,t){this.phraseLineNumber=this._TouchLine.children.length,c.ZP.timeline().to(e,{pixi:{alpha:1},duration:.1,delay:.4,yoyo:!0,repeat:4}).to(e,{pixi:{alpha:.2},duration:1,delay:1}).to(e,{pixi:{alpha:0},duration:.1,delay:(t-1e3)/1e3})}},{key:"showStartCharPlace",value:function(e){if(this._MoveTextTypes){var t=Math.floor(e/10),o=this._MoveTextTypes.startCharPlace(t);o.x*=p.width,o.y*=1920*p.height/1080,this._SomeSprite.showStartCharAnimation(o)}}},{key:"keyEvent",value:function(e){e.preventDefault(),this.isGameNow&&("Space"!==e.code&&" "!==e.key||this._beatTocuh(!0))}},{key:"_beatTocuh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this.isGameNow&&this.beatTouched||!this._BeatSprite)&&this._ScoreText){var t=this._player.timer.position,o=this._player.findBeat(t);if(o){var i=o.progress(t);console.log(i),i<.4||.8<i?(this._BeatSprite.iloveMiku.alpha=1,this._ScoreText.changeBonus(),this.beatTouched=!0,this.beatOnce=!0):e&&(this._BeatSprite.iloveMiku.alpha=.3,this._ScoreText.changeBonus(!0))}}}},{key:"debug",value:function(){console.log("%c!tap","color: red")}},{key:"changeStyle",value:function(){var e=80.8*p.wr/2;p.isSafari?p._media.style.left="".concat(e,"px"):p._media.style.transform="translate(-50%, 0%)"}},{key:"fontLoad",value:function(e){var t=this,o=this._player.data.text.replace(/\n/g,"");l.Loader.shared.add({name:"Yusei Magic",url:"https://fonts.googleapis.com/css2?family=Yusei+Magic&display=swap",metadata:{font:{testString:o}}}),l.Loader.shared.onComplete.once((function(){return t.fontLoadEnd(e,o)}),this),l.Loader.shared.load()}},{key:"fontLoadEnd",value:function(e,t){this._ScoreText&&(console.log("%c!fontLoaded","color: green"),this._LyricText=new L(e,this._ScoreText,t,this._player,this._player.getMaxVocalAmplitude()),this.addChild(this._LyricText),this.fontLoaded=!0)}},{key:"_backToMenu",value:function(){window.location.reload()}},{key:"handleResultScreen",value:function(){var e=this;if(this._ScoreText&&this._BeatSprite){p._media.style.visibility="hidden",this._Result.songTitle.text=this._player.data.song.name,this._Result.songArtist.text="- "+this._player.data.song.artist.name,c.ZP.to([this._BeatSprite.iloveMiku,this._ScoreText,this.pauseButton],{pixi:{alpha:0},duration:1}),this._ScoreText.combo>=this.maxCombo||(this._Result.full.visible=!1,this._Result.combo.visible=!1);var t=this._ScoreText.score+this._ScoreText.bonus,o=t/240,i=o;this._Result.visible=!0,c.ZP.timeline().to(this._Result,{pixi:{alpha:1},duration:.5}).to([this._Result.scoreText,this._Result.scoreNumber],{pixi:{alpha:1},duration:.5}),c.ZP.timeline().to(this._Result.scoreNumber,{onUpdate:function(){e._Result.scoreNumber.text=D(i),i+=o},onComplete:function(){e._Result.scoreNumber.text=D(t)},duration:4}).to(this._Result.full,{pixi:{y:400,alpha:1},duration:2,delay:1,ease:"power3"}).to(this._Result.combo,{pixi:{y:400,alpha:1},duration:2,delay:-2,ease:"power3"})}}},{key:"update",value:function(){}},{key:"resize",value:function(){}}]),o}(l.Container),I=function(){function e(t){(0,s.Z)(this,e),this._ScoreText=t,(0,u.Z)(this,"basedWidth",1920),(0,u.Z)(this,"basedHeight",1080),(0,u.Z)(this,"W",p.width),(0,u.Z)(this,"H",p.height),(0,u.Z)(this,"TR",p.textScale),(0,u.Z)(this,"WtoH",p.height*this.basedWidth/this.basedHeight)}return(0,r.Z)(e,[{key:"moveTextBasic",value:function(e,t,o,i,n){var a=this;e.TextBox.position.set(i.x*this.W,i.y*this.WtoH);var s=c.ZP.timeline();e.TextBox.visible=!0,s.to(e.TextBox,{pixi:{x:(n.x+Math.cos(o))*this.W,y:(n.y-Math.sin(o))*this.WtoH},duration:.7,ease:"none",onComplete:function(){e.Reached=!0}}).to(e.TextBox,{pixi:{alpha:0},duration:.5,delay:(t+150)/1e3,ease:"none",onComplete:function(){e.TextBox.visible=!1,e.Touched||a._ScoreText.cancelCombo()}})}},{key:"movePhraseText",value:function(e,t){var o=e.TextBox,i=e.Duration,n=e.NextDuration,a=e.TextBox.width,s=e.TextBox.height;o.position.set(.5*this.W,.39*this.H);var r=c.ZP.timeline();o.visible=!0,r.to(o,{pixi:{y:"-="+.03*this.H,alpha:1},duration:t/1e3,delay:1.6}).to(o,{pixi:{y:"-="+.05*this.H,width:.5*a,height:.5*s,alpha:.2},duration:t/1e3,delay:(i-t-200)/1e3}).to(o,{pixi:{alpha:0},duration:t/1e3,delay:(n-t)/1e3,onComplete:function(){o.visible=!1}})}}]),e}(),F=function(e){(0,v.Z)(o,e);var t=M(o);function o(e){var i;(0,s.Z)(this,o),i=t.call(this),(0,u.Z)((0,m.Z)(i),"flower",void 0),(0,u.Z)((0,m.Z)(i),"roseTextures",void 0),(0,u.Z)((0,m.Z)(i),"roseOrange",void 0),(0,u.Z)((0,m.Z)(i),"roseSky",void 0),(0,u.Z)((0,m.Z)(i),"roseMelon",void 0),(0,u.Z)((0,m.Z)(i),"rosePink",void 0),(0,u.Z)((0,m.Z)(i),"showStartCharFlower",void 0),(0,u.Z)((0,m.Z)(i),"normalRainVecs",void 0),(0,u.Z)((0,m.Z)(i),"chorusRainVecs",void 0),(0,u.Z)((0,m.Z)(i),"normalRosesC",void 0),(0,u.Z)((0,m.Z)(i),"chorusRosesC",void 0),(0,u.Z)((0,m.Z)(i),"normalRosesArray",void 0),(0,u.Z)((0,m.Z)(i),"chorusRosesArray",void 0),(0,u.Z)((0,m.Z)(i),"normalRoseNow",0),(0,u.Z)((0,m.Z)(i),"chorusRoseNow",0),(0,u.Z)((0,m.Z)(i),"roseModeBuffer",!1),(0,u.Z)((0,m.Z)(i),"baseW",p.wr),(0,u.Z)((0,m.Z)(i),"baseH",p.hr);var n=p.wr,a=p.hr,r=(p.textScale,0);r=5===e?0:3===e||4===e?1:1===e?2:3,i.normalRainVecs=new Array(50);for(var c=0;c<50;c++){var h=N(40,140);0!==c&&Math.abs(i.normalRainVecs[c]-h)<10&&(h=N(20,160)),i.normalRainVecs[c]=h}i.chorusRainVecs=new Array(50);for(var d=0;d<50;d++){var v=N(-70,250);0!==d&&Math.abs(i.chorusRainVecs[d]-v)<10&&(v=N(-70,250)),i.chorusRainVecs[d]=v}i.flower=l.Texture.from("mainFlower"),i.roseTextures=new Array,i.roseOrange=l.Texture.from("roseOrange"),i.roseTextures.push(i.roseOrange),i.roseSky=l.Texture.from("roseSky"),i.roseTextures.push(i.roseSky),i.roseMelon=l.Texture.from("roseMelon"),i.roseTextures.push(i.roseMelon),i.rosePink=l.Texture.from("rosePink"),i.roseTextures.push(i.rosePink),i.showStartCharFlower=l.Sprite.from(i.flower),i.showStartCharFlower.anchor.set(.5),i.showStartCharFlower.alpha=0,i.showStartCharFlower.scale.set(.06*n),i.addChild(i.showStartCharFlower),i.normalRosesC=new l.Container,i.normalRosesArray=new Array;for(var T=0;T<50;T++){var f=l.Sprite.from(i.roseTextures[r]);f.anchor.set(.5),f.alpha=.8,f.scale.set(.015*n),f.position.set(10*-n,10*-a),i.normalRosesC.addChild(f),i.normalRosesArray.push(f)}i.addChild(i.normalRosesC),i.chorusRosesC=new l.Container,i.chorusRosesArray=new Array;for(var x=0;x<50;x++){var y=l.Sprite.from(i.roseTextures[x%4]);y.anchor.set(.5),y.alpha=1,y.scale.set(.015*n),y.position.set(10*-n,10*-a),i.chorusRosesC.addChild(y),i.chorusRosesArray.push(y)}return i.addChild(i.chorusRosesC),i}return(0,r.Z)(o,[{key:"showRose",value:function(e){if(this.roseModeBuffer!==e&&this.changeRose(e),e){this.chorusRoseNow++,this.chorusRoseNow>=50&&(this.chorusRoseNow=0);var t=this.chorusRosesArray[this.chorusRoseNow],o=Math.PI*this.chorusRainVecs[this.chorusRoseNow]/180;c.ZP.killTweensOf(t),t.position.set(50*this.baseW,50*this.baseH),c.ZP.to(t,{pixi:{x:"+="+100*this.baseW*Math.cos(o),y:"+="+100*this.baseH*Math.sin(o),rotation:"-=720"},duration:4,ease:"none"})}else{this.normalRoseNow++,this.normalRoseNow>=50&&(this.normalRoseNow=0);var i=this.normalRosesArray[this.normalRoseNow],n=Math.PI*this.normalRainVecs[this.normalRoseNow]/180;c.ZP.killTweensOf(i),i.position.set(50*this.baseW,30*-this.baseH),c.ZP.to(i,{pixi:{x:"+="+150*this.baseW*Math.cos(n),y:"+="+150*this.baseH*Math.sin(n),rotation:"-=720"},duration:10,ease:"none"})}}},{key:"changeRose",value:function(e){this.roseModeBuffer=e;var t=this.chorusRosesC,o=this.normalRosesC;e&&(t=this.normalRosesC,o=this.chorusRosesC),c.ZP.to(t,{pixi:{alpha:0},duration:.5}),c.ZP.to(o,{pixi:{alpha:1},duration:.5})}},{key:"showStartCharAnimation",value:function(e){c.ZP.killTweensOf(this.showStartCharFlower),this.showStartCharFlower.alpha=0,this.showStartCharFlower.scale.set(.06*p.wr),this.showStartCharFlower.position.set(e.x,e.y),c.ZP.timeline().to(this.showStartCharFlower,{pixi:{alpha:1.2,scale:0,rotation:"+=400"},duration:2.5})}}]),o}(l.Container),z=function(e){(0,v.Z)(o,e);var t=M(o);function o(e,i){var n;(0,s.Z)(this,o),(n=t.call(this)).normalAddScore=e,n.bonusAddScore=i,(0,u.Z)((0,m.Z)(n),"score",void 0),(0,u.Z)((0,m.Z)(n),"combo",void 0),(0,u.Z)((0,m.Z)(n),"bonus",void 0),(0,u.Z)((0,m.Z)(n),"scoreText",void 0),(0,u.Z)((0,m.Z)(n),"scoreNumber",void 0),(0,u.Z)((0,m.Z)(n),"comboText",void 0),(0,u.Z)((0,m.Z)(n),"comboNumber",void 0),(0,u.Z)((0,m.Z)(n),"bonusText",void 0),(0,u.Z)((0,m.Z)(n),"bonusNumber",void 0),(0,u.Z)((0,m.Z)(n),"scoreHR",p.hr);var a=p.wr,r=p.hr,c=p.textScale;return n.score=0,n.combo=0,n.bonus=0,n.scoreText=new l.BitmapText("SCORE",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:48}),n.scoreText.anchor.set(1),n.scoreText.position.set(88*a,97.5*r),n.scoreText.scale.set(c),n.addChild(n.scoreText),n.scoreNumber=new l.BitmapText(D(0),{fontName:"ScoreRocknRoll",tint:11272191,fontSize:48}),n.scoreNumber.anchor.set(1),n.scoreNumber.position.set(101*a,97.5*r),n.scoreNumber.scale.set(c),n.addChild(n.scoreNumber),n.comboText=new l.BitmapText("COMBO",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:32}),n.comboText.anchor.set(1),n.comboText.position.set(96*a,85.5*r),n.comboText.scale.set(c),n.comboText.alpha=0,n.addChild(n.comboText),n.comboNumber=new l.BitmapText("0",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:32}),n.comboNumber.anchor.set(1),n.comboNumber.position.set(100.5*a,85.5*r),n.comboNumber.scale.set(c),n.comboNumber.alpha=0,n.addChild(n.comboNumber),n.bonusText=new l.BitmapText("BONUS",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:48}),n.bonusText.anchor.set(1),n.bonusText.position.set(92*a,91.5*r),n.bonusText.scale.set(c),n.addChild(n.bonusText),n.bonusNumber=new l.BitmapText(P(0),{fontName:"ScoreRocknRoll",tint:11272191,fontSize:48}),n.bonusNumber.anchor.set(1),n.bonusNumber.position.set(101*a,91.5*r),n.bonusNumber.scale.set(c),n.addChild(n.bonusNumber),n}return(0,r.Z)(o,[{key:"changeScore",value:function(){var e=this,t=this.score;this.score+=this.normalAddScore;var o=this.combo;this.combo+=1;var i=this.normalAddScore/60,n=i;c.ZP.killTweensOf(this.scoreNumber),this.scoreNumber.text=D(t),c.ZP.to(this.scoreNumber,{onUpdate:function(){e.scoreNumber.text=D(t+n),n+=i},onComplete:function(){e.scoreNumber.text=D(e.score)},duration:1}),this.combo>9&&(c.ZP.killTweensOf(this.comboNumber),this.comboNumber.text=o.toString(),this.comboText.alpha=1,this.comboNumber.alpha=1,this.comboNumber.y=85.5*p.hr,c.ZP.to(this.comboNumber,{pixi:{y:"-="+this.scoreHR,alpha:0},duration:.05,yoyo:!0,repeat:1,onRepeat:function(){e.comboNumber.text=e.combo.toString()},onComplete:function(){e.comboNumber.text=e.combo.toString(),e.comboText.alpha=1,e.comboNumber.alpha=1,e.comboNumber.y=85.5*p.hr}}))}},{key:"changeBonus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("%cBOUNUS","color: aqua");var o=this.bonusAddScore;t&&(o*=-.5);var i=this.bonus;this.bonus+=o,this.bonus<0&&(this.bonus=0),c.ZP.killTweensOf(this.bonusNumber),this.bonusNumber.text=P(i),this.bonusText.alpha=1,this.bonusNumber.alpha=1,this.bonusNumber.y=91.5*p.hr,c.ZP.to(this.bonusNumber,{pixi:{y:"-="+this.scoreHR,alpha:0},duration:.05,yoyo:!0,repeat:1,onRepeat:function(){e.bonusNumber.text=P(e.bonus)},onComplete:function(){e.bonusNumber.text=P(e.bonus),e.bonusText.alpha=1,e.bonusNumber.alpha=1,e.bonusNumber.y=91.5*p.hr}})}},{key:"cancelCombo",value:function(){c.ZP.killTweensOf(this.comboNumber),this.combo=0,this.comboText.alpha=0,this.comboNumber.alpha=0}}]),o}(l.Container),O=function(e){(0,v.Z)(o,e);var t=M(o);function o(){var e;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"iloveMiku",void 0),(0,u.Z)((0,m.Z)(e),"dancingMiku",void 0),(0,u.Z)((0,m.Z)(e),"beatLight",void 0),(0,u.Z)((0,m.Z)(e),"mikuTypeBuffer",void 0),(0,u.Z)((0,m.Z)(e),"basedW",p.wr),(0,u.Z)((0,m.Z)(e),"basedH",p.hr);var i=p.wr,n=p.hr;p.textScale;e.sortableChildren=!0,e.iloveMiku=new l.Container,e.dancingMiku=new Array;var a=l.Sprite.from("leftMiku");a.anchor.set(.5),a.scale.set(.018*i),a.position.set(50*i,63*n),a.alpha=0,e.iloveMiku.addChild(a),e.dancingMiku.push(a);var r=l.Sprite.from("centerMiku");r.anchor.set(.49,.49),r.scale.set(.018*i),r.position.set(50*i,63*n),r.alpha=1,e.iloveMiku.addChild(r),e.dancingMiku.push(r);var c=l.Sprite.from("rightMiku");c.anchor.set(.5),c.scale.set(.018*i),c.position.set(50*i,63*n),c.alpha=0,e.iloveMiku.addChild(c),e.dancingMiku.push(c),e.dancingMiku.push(r),e.iloveMiku.alpha=.3,e.addChild(e.iloveMiku),e.mikuTypeBuffer=1,e.beatLight=(new l.Graphics).beginFill(5241823).drawRect(0,90*n,100*i,80*n).endFill(),e.beatLight.zIndex=-100;var h=new l.filters.BlurFilter;return h.blur=40,e.beatLight.filters=[h],e.beatLight.alpha=.6,e.addChild(e.beatLight),e}return(0,r.Z)(o,[{key:"newBeat",value:function(e,t){var o=this;c.ZP.timeline().to(this.dancingMiku[this.mikuTypeBuffer],{pixi:{y:51*this.basedH,alpha:0},duration:t/8e3}).to(this.dancingMiku[e],{pixi:{y:63*this.basedH,alpha:1},duration:t/8e3,onComplete:function(){o.mikuTypeBuffer=e}})}}]),o}(l.Container);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return(0,T.Z)(this,o)}}var A=0,W=function(){A>0&&clearTimeout(A),A=window.setTimeout((function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);p._onResize(e,t)}),300)},H=function(e,t){return Math.floor(Math.random()*(t-e)+e)},U=function(e){(0,v.Z)(o,e);var t=E(o);function o(){var e;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"BG",void 0),(0,u.Z)((0,m.Z)(e),"_BackGround",void 0),(0,u.Z)((0,m.Z)(e),"_Buttons",void 0),(0,u.Z)((0,m.Z)(e),"_CreditScreen",void 0),(0,u.Z)((0,m.Z)(e),"songSelectURL",1),(0,u.Z)((0,m.Z)(e),"_tick",0),(0,u.Z)((0,m.Z)(e),"tickInterval",60),(0,u.Z)((0,m.Z)(e),"loadEnd",!1);var i=p.wr,n=p.hr;p.textScale;e.sortableChildren=!0,window.addEventListener("resize",W),e._Buttons=new V,e.addChild(e._Buttons);var a=Math.max(screen.availWidth,document.documentElement.clientWidth),r=Math.max(screen.availHeight,document.documentElement.clientHeight),c=Math.max(a,r)+200;return e.BG=(new l.Graphics).beginFill(0,.3).drawRect(0,0,c,c).endFill(),e.BG.pivot.set(c/2,c/2),e.BG.position.set(50*i,50*n),e.BG.interactive=!0,e.BG.visible=!1,e.addChild(e.BG),e._BackGround=new j,e._BackGround.pivot.set(50*i,50*n),e._BackGround.position.set(50*i,50*n),e._BackGround.zIndex=-1e4,e.addChild(e._BackGround),e._CreditScreen=new J,e._CreditScreen.pivot.set(800,400),e._CreditScreen.position.set(50*i,50*n),e._CreditScreen.scale.set(.07*n),e._CreditScreen.alpha=0,e._CreditScreen.visible=!1,e._CreditScreen.interactive=!0,e.addChild(e._CreditScreen),e._Buttons.song1Button.on("pointertap",(function(){return e.selectSong(1)}),(0,m.Z)(e)),e._Buttons.song2Button.on("pointertap",(function(){return e.selectSong(2)}),(0,m.Z)(e)),e._Buttons.song3Button.on("pointertap",(function(){return e.selectSong(3)}),(0,m.Z)(e)),e._Buttons.song4Button.on("pointertap",(function(){return e.selectSong(4)}),(0,m.Z)(e)),e._Buttons.song5Button.on("pointertap",(function(){return e.selectSong(5)}),(0,m.Z)(e)),e._Buttons.song6Button.on("pointertap",(function(){return e.selectSong(6)}),(0,m.Z)(e)),e._Buttons.playButton.on("pointertap",e.handlePlayButton,(0,m.Z)(e)),e._Buttons.creditButton.on("pointertap",e.showCredit,(0,m.Z)(e)),e.BG.on("pointertap",e.hideCredit,(0,m.Z)(e)),e.loadGameMenu(),e}return(0,r.Z)(o,[{key:"loadGameMenu",value:function(){var e=this,t=p.wr;p.hr;c.ZP.timeline().to(this._Buttons.song1Button,{pixi:{x:77*t},duration:2,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song2Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song3Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song4Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song5Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song6Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)",onComplete:function(){e.loadEnd=!0}})}},{key:"selectSong",value:function(e){var t=p.wr;this.songSelectURL=e;for(var o=0;o<6;o++)this._Buttons.songButtons[o].alpha=.5,this._Buttons.songButtons[o].x=80*t;this._Buttons.songButtons[e-1].alpha=1,this._Buttons.songButtons[e-1].x=77*t}},{key:"showCredit",value:function(){this.BG.visible=!0,this._CreditScreen.visible=!0,this._CreditScreen.alpha=1}},{key:"hideCredit",value:function(){this.BG.visible=!1,this._CreditScreen.visible=!1,this._CreditScreen.alpha=0}},{key:"handlePlayButton",value:function(){var e=this;this._Buttons.playButton.interactive=!1,window.removeEventListener("resize",W),c.ZP.to(this,{pixi:{alpha:0},duration:.5,onComplete:function(){return p.changeScene(new G(e.songSelectURL))}})}},{key:"update",value:function(){this._tick++,this._tick%this.tickInterval===0&&(this._BackGround.rainRose(),this.tickInterval=H(30,80),this._tick=0)}},{key:"resize",value:function(){if(this.loadEnd){var e=p.wr,t=p.hr,o=(p.textScale,e/25);this.BG.position.set(50*e,50*t),this._CreditScreen.position.set(50*e,50*t),this._CreditScreen.scale.set(.07*t),this._Buttons.title.position.set(25*e,43*t),this._Buttons.title.scale.set(1.3*o),this._Buttons.playButton.position.set(86*e,90*t),this._Buttons.playButton.scale.set(o),this._Buttons.creditButton.position.set(59*e,90*t),this._Buttons.creditButton.scale.set(o),this._Buttons.song1Button.position.set(80*e,11*t),this._Buttons.song1Button.scale.set(o),this._Buttons.song2Button.position.set(80*e,23*t),this._Buttons.song2Button.scale.set(o),this._Buttons.song3Button.position.set(80*e,35*t),this._Buttons.song3Button.scale.set(o),this._Buttons.song4Button.position.set(80*e,47*t),this._Buttons.song4Button.scale.set(o),this._Buttons.song5Button.position.set(80*e,59*t),this._Buttons.song5Button.scale.set(o),this._Buttons.song6Button.position.set(80*e,71*t),this._Buttons.song6Button.scale.set(o),this._BackGround.position.set(50*e,50*t),this.selectSong(this.songSelectURL)}}}]),o}(l.Container),J=function(e){(0,v.Z)(o,e);var t=E(o);function o(){var e;return(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"frame",void 0),(0,u.Z)((0,m.Z)(e),"creditTitle",void 0),(0,u.Z)((0,m.Z)(e),"credit1",void 0),(0,u.Z)((0,m.Z)(e),"credit2",void 0),(0,u.Z)((0,m.Z)(e),"specialTitle",void 0),(0,u.Z)((0,m.Z)(e),"SP1",void 0),(0,u.Z)((0,m.Z)(e),"SP2",void 0),e.frame=l.Sprite.from("frame"),e.addChild(e.frame),e.creditTitle=new l.BitmapText("Credit",{fontName:"BasicRocknRoll",tint:0,fontSize:112}),e.creditTitle.anchor.set(.5),e.creditTitle.position.set(800,130),e.addChild(e.creditTitle),e.credit1=new l.BitmapText("Plan&Program:huskyB4ll",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.credit1.anchor.set(.5),e.credit1.position.set(800,260),e.addChild(e.credit1),e.credit2=new l.BitmapText("Cheering Miku Picture:\u306d\u3053\u307f\u3093(@nukotun)   Menu&Result Graphic:\u3064\u307c(@tsubo_pi)",{fontName:"BasicRocknRoll",tint:0,fontSize:32}),e.credit2.anchor.set(.5),e.credit2.position.set(800,330),e.addChild(e.credit2),e.specialTitle=new l.BitmapText("Special Thanks",{fontName:"BasicRocknRoll",tint:0,fontSize:112}),e.specialTitle.anchor.set(.5),e.specialTitle.position.set(800,456),e.addChild(e.specialTitle),e.SP1=new l.BitmapText("All Vocaloid fans",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.SP1.anchor.set(.5),e.SP1.position.set(800,590),e.addChild(e.SP1),e.SP2=new l.BitmapText("You",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.SP2.anchor.set(.5),e.SP2.position.set(800,655),e.addChild(e.SP2),e}return o}(l.Container),V=function(e){(0,v.Z)(o,e);var t=E(o);function o(){var e;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"title",void 0),(0,u.Z)((0,m.Z)(e),"playButton",void 0),(0,u.Z)((0,m.Z)(e),"creditButton",void 0),(0,u.Z)((0,m.Z)(e),"songButtons",void 0),(0,u.Z)((0,m.Z)(e),"song1Button",void 0),(0,u.Z)((0,m.Z)(e),"song2Button",void 0),(0,u.Z)((0,m.Z)(e),"song3Button",void 0),(0,u.Z)((0,m.Z)(e),"song4Button",void 0),(0,u.Z)((0,m.Z)(e),"song5Button",void 0),(0,u.Z)((0,m.Z)(e),"song6Button",void 0);var i=p.wr,n=p.hr,a=i/25;return e.title=l.Sprite.from("title"),e.title.anchor.set(.5),e.title.position.set(25*i,43*n),e.title.scale.set(1.3*a),e.addChild(e.title),e.playButton=l.Sprite.from("titlePlayButton"),e.playButton.anchor.set(.5),e.playButton.position.set(86*i,90*n),e.playButton.scale.set(a),e.playButton.interactive=!0,e.playButton.buttonMode=!0,e.addChild(e.playButton),e.creditButton=l.Sprite.from("titleCreditButton"),e.creditButton.anchor.set(.5),e.creditButton.position.set(59*i,90*n),e.creditButton.scale.set(a),e.creditButton.interactive=!0,e.creditButton.buttonMode=!0,e.addChild(e.creditButton),e.songButtons=new Array,e.song1Button=l.Sprite.from("songTitle1"),e.song1Button.anchor.set(.5),e.song1Button.position.set(130*i,11*n),e.song1Button.scale.set(a),e.song1Button.alpha=1,e.song1Button.interactive=!0,e.song1Button.buttonMode=!0,e.addChild(e.song1Button),e.songButtons.push(e.song1Button),e.song2Button=l.Sprite.from("songTitle2"),e.song2Button.anchor.set(.5),e.song2Button.position.set(130*i,23*n),e.song2Button.scale.set(a),e.song2Button.alpha=.5,e.song2Button.interactive=!0,e.song2Button.buttonMode=!0,e.addChild(e.song2Button),e.songButtons.push(e.song2Button),e.song3Button=l.Sprite.from("songTitle3"),e.song3Button.anchor.set(.5),e.song3Button.position.set(130*i,35*n),e.song3Button.scale.set(a),e.song3Button.alpha=.5,e.song3Button.interactive=!0,e.song3Button.buttonMode=!0,e.addChild(e.song3Button),e.songButtons.push(e.song3Button),e.song4Button=l.Sprite.from("songTitle4"),e.song4Button.anchor.set(.5),e.song4Button.position.set(130*i,47*n),e.song4Button.scale.set(a),e.song4Button.alpha=.5,e.song4Button.interactive=!0,e.song4Button.buttonMode=!0,e.addChild(e.song4Button),e.songButtons.push(e.song4Button),e.song5Button=l.Sprite.from("songTitle5"),e.song5Button.anchor.set(.5),e.song5Button.position.set(130*i,59*n),e.song5Button.scale.set(a),e.song5Button.alpha=.5,e.song5Button.interactive=!0,e.song5Button.buttonMode=!0,e.addChild(e.song5Button),e.songButtons.push(e.song5Button),e.song6Button=l.Sprite.from("songTitle6"),e.song6Button.anchor.set(.5),e.song6Button.position.set(130*i,71*n),e.song6Button.scale.set(a),e.song6Button.alpha=.5,e.song6Button.interactive=!0,e.song6Button.buttonMode=!0,e.addChild(e.song6Button),e.songButtons.push(e.song6Button),e}return o}(l.Container),j=function(e){(0,v.Z)(o,e);var t=E(o);function o(){var e;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"rainPlace",void 0),(0,u.Z)((0,m.Z)(e),"basicRose",void 0),(0,u.Z)((0,m.Z)(e),"roses",void 0),(0,u.Z)((0,m.Z)(e),"roseNow",0),(0,u.Z)((0,m.Z)(e),"baseW",p.wr),(0,u.Z)((0,m.Z)(e),"baseH",p.hr);var i=p.wr,n=p.hr,a=(p.textScale,100*i/15);e.rainPlace=new Array(30);for(var r=0;r<30;r++){var c=H(a,20*a);0!==r&&Math.abs(e.rainPlace[r]-c)<a&&(c=H(a,20*a)),e.rainPlace[r]=c}e.basicRose=l.Texture.from("rosePink"),e.roses=new Array;for(var h=0;h<30;h++){var d=l.Sprite.from(e.basicRose);d.anchor.set(.5),d.alpha=.8,d.scale.set(.015*i),d.position.set(10*-i,10*-n),e.addChild(d),e.roses.push(d)}return e}return(0,r.Z)(o,[{key:"rainRose",value:function(){this.roseNow++,this.roseNow>=30&&(this.roseNow=0);var e=this.roses[this.roseNow];c.ZP.killTweensOf(e),e.position.set(this.rainPlace[this.roseNow],20*-this.baseH),c.ZP.to(e,{pixi:{x:"-="+30*this.baseW,y:"+="+140*this.baseH,rotation:"-=720"},duration:10,ease:"none"})}}]),o}(l.Container);function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return(0,T.Z)(this,o)}}var Y=0,Q=function(){Y>0&&clearTimeout(Y),Y=window.setTimeout((function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);p._onResize(e,t)}),300)},X=function(e){(0,v.Z)(o,e);var t=q(o);function o(){var e;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"suggestText1",void 0),(0,u.Z)((0,m.Z)(e),"suggestText2",void 0),(0,u.Z)((0,m.Z)(e),"suggestText3",void 0),(0,u.Z)((0,m.Z)(e),"continueButton",void 0);var i=p.wr,n=p.hr,a=p.textScale;return window.addEventListener("resize",Q),e.suggestText1=new l.BitmapText("\u6a2a\u753b\u9762\u63a8\u5968\u3067\u3059",{fontName:"BasicRocknRoll",tint:0,fontSize:64}),e.suggestText1.anchor.set(.5),e.suggestText1.position.set(50*i,40*n),e.suggestText1.scale.set(2*a),e.addChild(e.suggestText1),e.suggestText2=new l.BitmapText("please play the game in landscape mode",{fontName:"BasicRocknRoll",tint:0,fontSize:64}),e.suggestText2.anchor.set(.5),e.suggestText2.position.set(50*i,50*n),e.suggestText2.scale.set(a),e.addChild(e.suggestText2),e.suggestText3=new l.BitmapText("\u30d1\u30bd\u30b3\u30f3\u306e\u5834\u5408\u306f\u753b\u9762\u3092\u6a2a\u306b\u9577\u304f\u3057\u3066\u304b\u3089\u904a\u3093\u3067\u304f\u3060\u3055\u3044",{fontName:"BasicRocknRoll",tint:7368816,fontSize:72}),e.suggestText3.anchor.set(.5),e.suggestText3.position.set(50*i,60*n),e.suggestText3.scale.set(a),e.addChild(e.suggestText3),e.continueButton=new l.BitmapText("> Continue <",{fontName:"BasicRocknRoll",tint:7368816,fontSize:64}),e.continueButton.anchor.set(.5),e.continueButton.position.set(50*i,80*n),e.continueButton.scale.set(a),e.continueButton.alpha=0,e.continueButton.interactive=!0,e.continueButton.buttonMode=!0,e.continueButton.on("pointertap",e.goGameMenuScene,(0,m.Z)(e)),e.addChild(e.continueButton),c.ZP.to(e.continueButton,{pixi:{alpha:1},duration:.2,delay:1.5}),e}return(0,r.Z)(o,[{key:"goGameMenuScene",value:function(){this.continueButton.interactive=!1,window.removeEventListener("resize",Q),c.ZP.to(this,{pixi:{alpha:0},duration:.5,onComplete:function(){return p.changeScene(new U)}})}},{key:"update",value:function(){}},{key:"resize",value:function(){var e=p.wr,t=p.hr,o=p.textScale;this.suggestText1.position.set(50*e,37*t),this.suggestText1.scale.set(1.6*o),this.suggestText2.position.set(50*e,50*t),this.suggestText2.scale.set(.8*o),this.suggestText3.position.set(50*e,60*t),this.suggestText3.scale.set(.8*o),this.continueButton.position.set(50*e,80*t),this.continueButton.scale.set(.8*o)}}]),o}(l.Container);function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return(0,T.Z)(this,o)}}var $=function(e){(0,v.Z)(o,e);var t=K(o);function o(){var e;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"_LoadingFlower",void 0),(0,u.Z)((0,m.Z)(e),"loadingText",void 0),(0,u.Z)((0,m.Z)(e),"tick",void 0),console.log("resolution",window.devicePixelRatio);var i=p.wr,n=p.hr,a=p.textScale;return l.utils.destroyTextureCache(),e.sortableChildren=!0,e.tick=0,e.loadingText=new l.Text("Loading.",{fontFamily:"RocknRoll One",fill:0,fontSize:64}),e.loadingText.resolution=2,e.loadingText.anchor.y=.5,e.loadingText.position.set(35*i,50*n),e.loadingText.scale.set(2*a),e.loadingText.zIndex=100,e.addChild(e.loadingText),e._LoadingFlower=new ee,e._LoadingFlower.position.set(50*i,50*n),e._LoadingFlower.scale.set(i<n?.15*n:.1*i),e._LoadingFlower.alpha=.5,e.addChild(e._LoadingFlower),l.Loader.shared.add(y),l.Loader.shared.onProgress.add(e.downloadProgress,(0,m.Z)(e)),l.Loader.shared.onComplete.once(e.gameLoaded,(0,m.Z)(e)),l.Loader.shared.onError.once(e.errorHandle,(0,m.Z)(e)),l.Loader.shared.load(),e}return(0,r.Z)(o,[{key:"downloadProgress",value:function(e){this._LoadingFlower.flowermask.y=-4*e.progress}},{key:"gameLoaded",value:function(){this.initSetting(),this._LoadingFlower.flowermask.visible=!1,c.p8.to(this,{pixi:{alpha:0},duration:.5,delay:.2,onComplete:this.changeScene})}},{key:"errorHandle",value:function(){setTimeout((function(){void 0!==window?window.location.reload():location.reload()}),1e3)}},{key:"initSetting",value:function(){var e=2;l.utils.isMobile.any&&(e=1),l.BitmapFont.from("BasicRocknRoll",{fontFamily:"RocknRoll One",fill:"#ffffff",fontSize:96},{resolution:e,chars:l.Loader.shared.resources.fontText.data.required.join("")+l.Loader.shared.resources.fontText.data.text.join("")}),l.BitmapFont.from("ScoreRocknRoll",{fontFamily:"RocknRoll One",fontSize:96,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#05ffff"],stroke:"#4a1850",strokeThickness:3,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:4,wordWrap:!0,wordWrapWidth:440,lineJoin:"round"},{resolution:e,chars:l.Loader.shared.resources.fontText.data.required.join("")}),l.BitmapFont.from("FullComboRocknRoll",{fontFamily:"RocknRoll One",fontSize:96,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#e6c422"],stroke:"#ffa200",strokeThickness:2,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowDistance:4,lineJoin:"round"},{resolution:e,chars:"FULLCOMBO"})}},{key:"changeScene",value:function(){Math.max(document.documentElement.clientWidth,window.innerWidth||0)<Math.max(document.documentElement.clientHeight,window.innerHeight||0)?p.changeScene(new X):p.changeScene(new U)}},{key:"update",value:function(){this.tick+=1,90===this.tick&&(this.tick=0),this.tick<30?this.loadingText.text="Loading.":this.tick<60?this.loadingText.text="Loading..":this.loadingText.text="Loading..."}},{key:"resize",value:function(){}}]),o}(l.Container),ee=function(e){(0,v.Z)(o,e);var t=K(o);function o(){var e;(0,s.Z)(this,o),e=t.call(this),(0,u.Z)((0,m.Z)(e),"flower",void 0),(0,u.Z)((0,m.Z)(e),"flowerBGSprite",void 0),(0,u.Z)((0,m.Z)(e),"flowerSprite",void 0),(0,u.Z)((0,m.Z)(e),"flowermask",void 0);p.wr,p.hr,p.textScale;return e.flower=l.Texture.from("DancingMiku/loadResultMiku.png"),e.flowerSprite=l.Sprite.from(e.flower),e.addChild(e.flowerSprite),e.flowerBGSprite=l.Sprite.from(e.flower),e.addChild(e.flowerBGSprite),e.flowermask=(new l.Graphics).beginFill(0,1).drawRect(0,0,400,400).endFill(),e.addChild(e.flowermask),e.flowermask.mask=e.flowerBGSprite,e.pivot.set(200,200),e}return o}(l.Container),te=o(5893),oe=function(){var e=(0,i.useRef)(null),t=(0,i.useRef)(null);return(0,i.useEffect)((function(){var o=e.current,i=t.current;if(o&&i){a().clear();var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),s=Math.max(document.documentElement.clientHeight,window.innerHeight||0);p.initialize(o,i,n,s);var r=new $;p.changeScene(r)}}),[e,t]),(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("canvas",{ref:e}),(0,te.jsxs)("button",{type:"button",id:"dummyButton",onClick:function(e){e.preventDefault(),e.currentTarget.style.display="none",setTimeout((function(){e.target.style.display="none"}),100)},children:["Please",(0,te.jsx)("br",{}),"Touch Display",(0,te.jsx)("br",{}),(0,te.jsx)("br",{}),(0,te.jsx)("br",{}),(0,te.jsx)("br",{})]}),(0,te.jsx)("div",{ref:t,id:"media"})]})}}}]);