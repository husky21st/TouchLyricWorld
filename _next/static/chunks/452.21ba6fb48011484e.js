"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[452],{8452:function(e,t,o){o.r(t),o.d(t,{default:function(){return Ye}});var n=o(5893),i=o(7294),a=o(7113),r=o.n(a),s=o(8330),u=o(6038),l=o(4607),c=o(1729);function h(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,n;return t=e,n=[{key:"width",get:function(){return e._width}},{key:"height",get:function(){return e._height}},{key:"wr",get:function(){return e._width/100}},{key:"hr",get:function(){return e._height/100}},{key:"textScale",get:function(){return e._width/2e3}},{key:"initialize",value:function(t,o,n,i){e._width=n,e._height=i,e.app=new s.Application({view:t,resolution:window.devicePixelRatio||1,backgroundColor:16317691,autoDensity:!1,antialias:!0,width:n,height:i}),u.p8.registerPlugin(l.w),l.w.registerPIXI(s),s.Loader.registerPlugin(c.r),s.TextMetrics.BASELINE_SYMBOL+="\u3042\u307d\uff5c",e.app.ticker.stop(),u.p8.ticker.fps(60),u.p8.ticker.add((function(){e.app.ticker.update()})),e.app.ticker.add(e.update),e._media=o,e._media.style.visibility="hidden",e.ManagerInitSetting()}},{key:"ManagerInitSetting",value:function(){s.Loader.shared.destroy();var e=window.navigator.userAgent.toLowerCase();this.isSafari=!1,-1!=e.indexOf("edge")||-1!=e.indexOf("chrome")||(-1!=e.indexOf("safari")?this.isSafari=!0:-1!=e.indexOf("firefox")||-1!=e.indexOf("opera")||(this.isSafari=!0)),this.isSafari&&(s.settings.PREFER_ENV=s.ENV.WEBGL)}},{key:"_onResize",value:function(t,o){e._width=t,e._height=o,e.app.renderer.resize(e.width,e.height),e.currentScene&&e.currentScene.resize(),e.app.render(),setTimeout((function(){window.scrollTo(0,1)}),200)}},{key:"changeScene",value:function(t){e.currentScene&&(e.app.stage.removeChild(e.currentScene),e.currentScene.destroy()),e.currentScene=t,e.currentScene.alpha=0,e.app.stage.addChild(e.currentScene),u.p8.to(e.currentScene,{pixi:{alpha:1},duration:.3})}},{key:"update",value:function(){e.currentScene&&e.currentScene.update()}}],(o=null)&&h(t.prototype,o),n&&h(t,n),e}(),d=o(7172);function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e,t){return!t||"object"!==T(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}var T=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=f(e);if(t){var i=f(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return m(this,o)}}var x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,e);var t=v(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=t.call(this)).frame=s.Sprite.from("frame"),e.addChild(e.frame);var n={width:5,color:1118481,alpha:1,join:s.LINE_JOIN.ROUND,cap:s.LINE_CAP.ROUND};return e.spaceLine=(new s.Graphics).lineStyle(n).moveTo(100,400).lineTo(1500,400),e.addChild(e.spaceLine),e.explainJP1=new s.BitmapText("\u6b4c\u8a5e\u304c\u7dda\u306e\u3068\u3053\u308d\u307e\u3067\u6765\u305f\u3089\u30bf\u30a4\u30df\u30f3\u30b0\u826f\u304f\u306a\u305e\u308d\u3046\uff01",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.explainJP1.anchor.set(.5),e.explainJP1.position.set(800,130),e.addChild(e.explainJP1),e.explainJP2=new s.BitmapText("\u30d3\u30fc\u30c8\u306b\u5408\u308f\u305b\u3066",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.explainJP2.anchor.set(.5),e.explainJP2.position.set(800,220),e.addChild(e.explainJP2),e.explainJP3=new s.BitmapText("\u30b9\u30da\u30fc\u30b9\u30ad\u30fc\u3092\u62bc\u3059\u3068 / \u4ed6\u306e\u6307\u3067\u753b\u9762\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.explainJP3.anchor.set(.5),e.explainJP3.position.set(800,275),e.addChild(e.explainJP3),e.explainJP4=new s.BitmapText("\u5f97\u70b9\u30a2\u30c3\u30d7\uff01",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.explainJP4.anchor.set(.5),e.explainJP4.position.set(800,330),e.addChild(e.explainJP4),e.explainEN1=new s.BitmapText("When the lyrics come to the line, trace them with good timing!",{fontName:"BasicRocknRoll",tint:0,fontSize:42}),e.explainEN1.anchor.set(.5),e.explainEN1.position.set(800,450),e.addChild(e.explainEN1),e.explainEN2=new s.BitmapText("Press the spacebar / Tap the screen with your other finger",{fontName:"BasicRocknRoll",tint:0,fontSize:42}),e.explainEN2.anchor.set(.5),e.explainEN2.position.set(800,540),e.addChild(e.explainEN2),e.explainEN3=new s.BitmapText("on the beat to increase your score!",{fontName:"BasicRocknRoll",tint:0,fontSize:42}),e.explainEN3.anchor.set(.5),e.explainEN3.position.set(800,590),e.addChild(e.explainEN3),e.loadingNow=new s.Container,e.loadingText=new s.BitmapText("Loading",{fontName:"BasicRocknRoll",tint:0,fontSize:64}),e.loadingText.anchor.set(.5),e.loadingText.position.set(780,670),e.loadingNow.addChild(e.loadingText),e.loadingCycle=s.Sprite.from("loopBack"),e.loadingCycle.anchor.set(.5),e.loadingCycle.position.set(960,685),e.loadingCycle.scale.set(.15),e.loadingNow.addChild(e.loadingCycle),e.addChild(e.loadingNow),e.startButton=new s.BitmapText("> Start <",{fontName:"BasicRocknRoll",tint:0,fontSize:64}),e.startButton.anchor.set(.5),e.startButton.position.set(800,670),e.startButton.alpha=0,e.startButton.interactive=!0,e.startButton.buttonMode=!0,e.addChild(e.startButton),e}return o}(s.Container);function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function k(e,t){return!t||"object"!==w(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e,t){return B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B(e,t)}var w=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=b(e);if(t){var i=b(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return k(this,o)}}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(a,e);var t,o,n,i=S(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).basedWidth=1920,e.basedHeight=1080,e.PI=Math.PI,e}return t=a,o=[{key:"makeLine",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.basedWidth,i=(this.basedHeight,this.PI),a={width:5,color:1118481,alpha:1,join:s.LINE_JOIN.ROUND,cap:s.LINE_CAP.ROUND},r=new s.Graphics;if(0===e){var u=Math.min(t,5);if(u<=0)return void r.destroy();if(o){var l=154.8+25.2*u/5;r.lineStyle(a).arc(1.05*n,.04*n,n,154.8*i/180,i*l/180)}else{var c=180-25.2*u/5;r.lineStyle(a).arc(1.05*n,.04*n,n,180*i/180,i*c/180,!0)}}else if(1===e){var h=Math.min(t,5);if(h<=0)return void r.destroy();if(o){var p=11+26.2*(5-h)/5;r.lineStyle(a).arc(.65*-n,.14*-n,n,37.2*i/180,i*p/180,!0)}else{var d=11+26.2*h/5;r.lineStyle(a).arc(.65*-n,.14*-n,n,11*i/180,i*d/180)}}else if(2===e){var f=Math.min(t,5);if(f<=0)return void r.destroy();if(o){var m=142.8+26.2*f/5;r.lineStyle(a).arc(1.65*n,.14*-n,n,142.8*i/180,i*m/180)}else{var y=169-26.2*f/5;r.lineStyle(a).arc(1.65*n,.14*-n,n,169*i/180,i*y/180,!0)}}else if(3===e){var T=Math.min(t,5);if(T<=0)return void r.destroy();if(o){var v=25.2*(5-T)/5;r.lineStyle(a).arc(.05*-n,.04*n,n,25.2*i/180,i*v/180,!0)}else{var x=25.2*T/5;r.lineStyle(a).arc(.05*-n,.04*n,n,0,i*x/180)}}else if(4===e){var g=Math.min(t,7);if(g<=0)return void r.destroy();if(o){var b=118+39.1*g/7;r.lineStyle(a).arc(.9715*n,.3515*-n,n,118*i/180,i*b/180)}else{var k=157.1-39.1*g/7;r.lineStyle(a).arc(.9715*n,.3515*-n,n,157.1*i/180,i*k/180,!0)}}else if(5===e){var B=Math.min(t,7);if(B<=0)return void r.destroy();if(o){var w=62-39.1*B/7;r.lineStyle(a).arc(.0285*n,.3515*-n,n,62*i/180,i*w/180,!0)}else{var S=22.9+39.1*B/7;r.lineStyle(a).arc(.0285*n,.3515*-n,n,22.9*i/180,i*S/180)}}else if(6===e){var _=Math.min(t,4);if(_<=0)return void r.destroy();if(o){var L=90+20.8*_/4;r.lineStyle(a).arc(.5*n,.469*-n,n,90*i/180,i*L/180)}else{var C=110.8-20.8*_/4;r.lineStyle(a).arc(.5*n,.469*-n,n,110.8*i/180,i*C/180,!0)}}else if(7===e){var R=Math.min(t,4);if(R<=0)return void r.destroy();if(o){var D=90-20.8*R/4;r.lineStyle(a).arc(.5*n,.469*-n,n,90*i/180,i*D/180,!0)}else{var M=69.2+20.8*R/4;r.lineStyle(a).arc(.5*n,.469*-n,n,69.2*i/180,i*M/180)}}r.alpha=0,this.addChild(r)}}],o&&g(t.prototype,o),n&&g(t,n),a}(s.Container);function L(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function R(e,t){return!t||"object"!==M(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}var M=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=C(e);if(t){var i=C(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return R(this,o)}}var N=function(e){return Math.floor(Math.random()*e)},O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(a,e);var t,o,n,i=P(a);function a(e,t,o,n,r,u,l){var c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this))._ScoreText=e,c.baseWR=6*p.wr;var h=p.wr,d=p.textScale,f=2;return s.utils.isMobile.any&&(f=1),s.BitmapFont.from("BasicYuseiMagic",{fontFamily:"Yusei Magic",fill:"#ffffff",fontSize:96},{resolution:f,chars:o}),c.sortableChildren=!0,c.charTextBoxs=new Array,c.phraseTexts=new Array,c.createTexts(t,h,d,n,r,u,l),c}return t=a,(o=[{key:"createTexts",value:function(e,t,o,n,i,a,r){for(var u,l=this,c=function(e){for(var u=l,c=function(l){var c=u,p=2.7+.7*n[b]/a,d=i[b].a-r.a,f=i[b].v-r.v,m=s.utils.rgb2hex([.9*d+.1,d*f*80+.82,.9*f+.8]),T=new s.Container;T.sortableChildren=!0;var v=new s.BitmapText(h.text,{fontName:"BasicYuseiMagic",tint:0,fontSize:64});v.anchor.set(.5,.65),v.scale.set(2.6*o),v.zIndex=100*(e+1)+l,T.addChild(v);var x=new s.BitmapText(h.text,{fontName:"BasicYuseiMagic",tint:m,fontSize:64});x.anchor.set(.5,.65),x.scale.set(o*p),x.zIndex=100*(e+1)+l-1e5,x.alpha=0,T.addChild(x);var g=new s.filters.BlurFilter;g.blur=4,x.filters=[g];var k=(new s.Graphics).beginFill(255).drawCircle(0,0,5*t).endFill();k.alpha=0,T.addChild(k);var B=(new s.Graphics).beginFill(65280).drawCircle(0,0,4*t).endFill();B.alpha=0,T.addChild(B);var w=(new s.Graphics).beginFill(16711680).drawCircle(0,0,3*t).endFill();w.alpha=0,T.addChild(w);var S=(new s.Graphics).beginFill(16711680).drawCircle(0,0,2*t).endFill();S.alpha=0,T.addChild(S);var _=(new s.Graphics).beginFill(16711680).drawCircle(0,0,1*t).endFill();_.alpha=0,T.addChild(_),T.visible=!1,u.addChild(T);var L={TextBox:T,Duration:h.duration+50||50,Place:y[e],PhraseIndexOf:l,Reached:!1,Touched:!1};k.interactive=!0,k.buttonMode=!0,k.on("pointerout",(function(e){c.addScore(e,L)}),u),k.on("pointerover",(function(e){c.addScore(e,L)}),u),k.on("touchstart",(function(e){c.addScore(e,L)}),u),k.on("touchmove",(function(e){c.addScore(e,L)}),u),B.interactive=!0,B.buttonMode=!0,B.on("pointerout",(function(e){c.addScore(e,L)}),u),B.on("pointerover",(function(e){c.addScore(e,L)}),u),B.on("touchstart",(function(e){c.addScore(e,L)}),u),B.on("touchmove",(function(e){c.addScore(e,L)}),u),w.interactive=!0,w.buttonMode=!0,w.on("pointerout",(function(e){c.addScore(e,L)}),u),w.on("pointerover",(function(e){c.addScore(e,L)}),u),w.on("touchstart",(function(e){c.addScore(e,L)}),u),w.on("touchmove",(function(e){c.addScore(e,L)}),u),S.interactive=!0,S.buttonMode=!0,S.on("pointerout",(function(e){c.addScore(e,L)}),u),S.on("pointerover",(function(e){c.addScore(e,L)}),u),S.on("touchstart",(function(e){c.addScore(e,L)}),u),S.on("touchmove",(function(e){c.addScore(e,L)}),u),_.interactive=!0,_.buttonMode=!0,_.on("pointerout",(function(e){c.addScore(e,L)}),u),_.on("pointerover",(function(e){c.addScore(e,L)}),u),_.on("touchstart",(function(e){c.addScore(e,L)}),u),_.on("touchmove",(function(e){c.addScore(e,L)}),u),u.charTextBoxs.push(L),h=h.next},h=m.firstChar,p=0;p<m.charCount;p++,b++)c(p);var d=new s.Container;d.sortableChildren=!0;var f=new s.BitmapText(m.text,{fontName:"BasicYuseiMagic",tint:16388051,fontSize:68});f.anchor.set(.5),f.scale.set(o),f.zIndex=e,d.addChild(f);var T=new s.BitmapText(m.text,{fontName:"BasicYuseiMagic",tint:16777215,fontSize:68});T.anchor.set(.495,.495),T.scale.set(o),T.zIndex=e-1e3,d.addChild(T);var v=new s.filters.BlurFilter;v.blur=2,T.filters=[v],d.alpha=0,d.visible=!1,l.addChild(d),l.phraseTexts.push({TextBox:d,Duration:m.duration,NextDuration:m.next?m.next.duration:3e3,PhrasePlace:y[e],PhraseCharCount:m.charCount}),m=m.next},h=[0,1,10,11,20,21,30,31,40,50,60,70,80,90],p=h.concat([2,3,12,13,22,23,32,33,41,42,51,52,61,71,81,91]),d=p.concat([4,14,24,34,43,53,62,63,64,72,73,74]),f=d.concat([65,75,82,83,84,92]),m=e,y=new Array,T=0;null!==m;T++){var v=m.charCount,x=N((u=v<5?f:v<10?d:v<16?p:h).length),g=u[x];0!==T&&y[T-1]===g&&(g=u[x=N(u.length)]),y.push(g),m=m.next}var b=0;m=e;for(var k=0;null!==m;k++)c(k)}},{key:"addScore",value:function(e,t){if(t.Reached&&!t.Touched){var o,n,i=e.data.getLocalPosition(e.currentTarget);o=i.x,n=i.y,Math.sqrt(Math.pow(o,2)+Math.pow(n,2))>this.baseWR||(t.TextBox.interactive=!1,t.Touched=!0,t.TextBox.children[0].alpha=1,this._ScoreText.changeScore())}}}])&&L(t.prototype,o),n&&L(t,n),a}(s.Container);function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function j(e,t){return!t||"object"!==F(t)&&"function"!==typeof t?I(e):t}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}var F=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=G(e);if(t){var i=G(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return j(this,o)}}var H=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(a,e);var t,o,n,i=A(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).frame=s.Sprite.from("frame"),e.addChild(e.frame),e.mikuBG=s.Sprite.from("DancingMiku/loadResultMiku.png"),e.mikuBG.scale.set(1),e.mikuBG.position.set(50,360),e.addChild(e.mikuBG),e.resultText=s.Sprite.from("resultText"),e.resultText.anchor.set(.5),e.resultText.position.set(810,190),e.addChild(e.resultText),e.twitterLogo=s.Sprite.from("twitterLogo"),e.twitterLogo.scale.set(.04),e.twitterLogo.position.set(1134,690),e.addChild(e.twitterLogo),e.scoreText=new s.BitmapText(" TOTAL SCORE",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:96}),e.scoreText.anchor.set(.5),e.scoreText.position.set(820,340),e.scoreText.alpha=0,e.addChild(e.scoreText),e.scoreNumber=new s.BitmapText(" 0000000",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:96}),e.scoreNumber.anchor.set(.5),e.scoreNumber.position.set(815,470),e.scoreNumber.alpha=0,e.addChild(e.scoreNumber),e.songTitle=new s.BitmapText("First Note",{fontName:"BasicRocknRoll",tint:0,fontSize:42}),e.songTitle.anchor.set(1,0),e.songTitle.position.set(1520,70),e.addChild(e.songTitle),e.songArtist=new s.BitmapText("- blues",{fontName:"BasicRocknRoll",tint:0,fontSize:26}),e.songArtist.anchor.set(1,0),e.songArtist.position.set(1520,120),e.addChild(e.songArtist),e.backToMenu=new s.BitmapText("> Back to Menu <",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.backToMenu.anchor.set(.5),e.backToMenu.position.set(807,650),e.backToMenu.alpha=.5,e.backToMenu.interactive=!0,e.backToMenu.buttonMode=!0,e.backToMenu.on("pointertap",e._backToMenu,I(e)),e.addChild(e.backToMenu),e.twitterTag=new s.BitmapText("#TouchLyricWorld",{fontName:"BasicRocknRoll",tint:44270,fontSize:36}),e.twitterTag.anchor.set(.5),e.twitterTag.position.set(1350,700),e.addChild(e.twitterTag),e.full=new s.BitmapText("FULL",{fontName:"FullComboRocknRoll",tint:15123490,fontSize:96}),e.full.anchor.set(.4,.5),e.full.position.set(360,600),e.full.angle=-90,e.full.alpha=0,e.addChild(e.full),e.combo=new s.BitmapText("COMBO",{fontName:"FullComboRocknRoll",tint:15123490,fontSize:96}),e.combo.anchor.set(.4,.5),e.combo.position.set(1270,200),e.combo.angle=90,e.combo.alpha=0,e.addChild(e.combo),e}return t=a,(o=[{key:"_backToMenu",value:function(){window.location.reload()}}])&&E(t.prototype,o),n&&E(t,n),a}(s.Container);function W(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ScoreText=t,this._MoveLyricText=new ae(this._ScoreText)}var t,o,n;return t=e,o=[{key:"moveCharText",value:function(e){var t=e.Place,o=e.PhraseIndexOf;0===t?o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<32&&this.moveTextType4(e,o-25,e.Duration,!0):1===t?o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<29&&this.moveTextType6(e,o-25,e.Duration,!0):2===t?o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<16&&this.moveTextType5(e,o-9,e.Duration,!0):3===t?o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<16&&this.moveTextType4(e,o-9,e.Duration,!0):4===t?o<5?this.moveTextType0(e,o,e.Duration):o<10&&this.moveTextType1(e,o-5,e.Duration,!0):10===t?o<5?this.moveTextType3(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<13?this.moveTextType6(e,o-9,e.Duration,!0):o<18?this.moveTextType0(e,o-13,e.Duration,!0):o<25?this.moveTextType4(e,o-18,e.Duration):o<32&&this.moveTextType5(e,o-25,e.Duration,!0):11===t?o<5?this.moveTextType3(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<13?this.moveTextType6(e,o-9,e.Duration,!0):o<18?this.moveTextType0(e,o-13,e.Duration,!0):o<25?this.moveTextType4(e,o-18,e.Duration):o<29&&this.moveTextType7(e,o-25,e.Duration,!0):12===t?o<5?this.moveTextType3(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<16&&this.moveTextType4(e,o-9,e.Duration,!0):13===t?o<5?this.moveTextType3(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<16&&this.moveTextType5(e,o-9,e.Duration,!0):14===t?o<5?this.moveTextType3(e,o,e.Duration):o<10&&this.moveTextType2(e,o-5,e.Duration,!0):20===t?o<5?this.moveTextType1(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<32&&this.moveTextType4(e,o-25,e.Duration,!0):21===t?o<5?this.moveTextType1(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<29&&this.moveTextType6(e,o-25,e.Duration,!0):22===t?o<5?this.moveTextType1(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<16&&this.moveTextType5(e,o-9,e.Duration,!0):23===t?o<5?this.moveTextType1(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<16&&this.moveTextType4(e,o-9,e.Duration,!0):24===t?o<5?this.moveTextType1(e,o,e.Duration):o<10&&this.moveTextType0(e,o-5,e.Duration,!0):30===t?o<5?this.moveTextType2(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<13?this.moveTextType6(e,o-9,e.Duration,!0):o<18?this.moveTextType0(e,o-13,e.Duration,!0):o<25?this.moveTextType4(e,o-18,e.Duration):o<32&&this.moveTextType5(e,o-25,e.Duration,!0):31===t?o<5?this.moveTextType2(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<13?this.moveTextType6(e,o-9,e.Duration,!0):o<18?this.moveTextType0(e,o-13,e.Duration,!0):o<25?this.moveTextType4(e,o-18,e.Duration):o<29&&this.moveTextType7(e,o-25,e.Duration,!0):32===t?o<5?this.moveTextType2(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<16&&this.moveTextType4(e,o-9,e.Duration,!0):33===t?o<5?this.moveTextType2(e,o,e.Duration):o<9?this.moveTextType7(e,o-5,e.Duration):o<16&&this.moveTextType5(e,o-9,e.Duration,!0):34===t?o<5?this.moveTextType2(e,o,e.Duration):o<10&&this.moveTextType3(e,o-5,e.Duration,!0):40===t?o<7?this.moveTextType4(e,o,e.Duration):o<11?this.moveTextType7(e,o-7,e.Duration,!0):o<16?this.moveTextType3(e,o-11,e.Duration,!0):o<23?this.moveTextType5(e,o-16,e.Duration):o<30&&this.moveTextType4(e,o-23,e.Duration,!0):41===t?o<7?this.moveTextType4(e,o,e.Duration):o<11?this.moveTextType7(e,o-7,e.Duration,!0):o<16?this.moveTextType3(e,o-11,e.Duration,!0):o<23?this.moveTextType5(e,o-16,e.Duration):o<27&&this.moveTextType6(e,o-23,e.Duration,!0):42===t?o<7?this.moveTextType4(e,o,e.Duration):o<11?this.moveTextType7(e,o-7,e.Duration,!0):o<16&&this.moveTextType2(e,o-11,e.Duration,!0):43===t?o<7?this.moveTextType4(e,o,e.Duration):o<14&&this.moveTextType5(e,o-7,e.Duration,!0):50===t?o<7?this.moveTextType5(e,o,e.Duration):o<11?this.moveTextType6(e,o-7,e.Duration,!0):o<16?this.moveTextType0(e,o-11,e.Duration,!0):o<23?this.moveTextType4(e,o-16,e.Duration):o<30&&this.moveTextType5(e,o-23,e.Duration,!0):51===t?o<7?this.moveTextType5(e,o,e.Duration):o<11?this.moveTextType6(e,o-7,e.Duration,!0):o<16?this.moveTextType0(e,o-11,e.Duration,!0):o<23?this.moveTextType4(e,o-16,e.Duration):o<27&&this.moveTextType7(e,o-23,e.Duration,!0):52===t?o<7?this.moveTextType5(e,o,e.Duration):o<11?this.moveTextType6(e,o-7,e.Duration,!0):o<16&&this.moveTextType1(e,o-11,e.Duration,!0):53===t?o<7?this.moveTextType5(e,o,e.Duration):o<14&&this.moveTextType4(e,o-7,e.Duration,!0):60===t?o<4?this.moveTextType6(e,o,e.Duration):o<8?this.moveTextType7(e,o-4,e.Duration,!0):o<13?this.moveTextType3(e,o-8,e.Duration,!0):o<20?this.moveTextType5(e,o-13,e.Duration):o<24?this.moveTextType6(e,o-20,e.Duration,!0):o<29&&this.moveTextType0(e,o-24,e.Duration,!0):61===t?o<4?this.moveTextType6(e,o,e.Duration):o<8?this.moveTextType7(e,o-4,e.Duration,!0):o<13?this.moveTextType3(e,o-8,e.Duration,!0):o<20?this.moveTextType5(e,o-13,e.Duration):o<27&&this.moveTextType4(e,o-20,e.Duration,!0):62===t?o<4?this.moveTextType6(e,o,e.Duration):o<8?this.moveTextType7(e,o-4,e.Duration,!0):o<13&&this.moveTextType2(e,o-8,e.Duration,!0):63===t?o<4?this.moveTextType6(e,o,e.Duration):o<11&&this.moveTextType5(e,o-4,e.Duration,!0):64===t?o<4?this.moveTextType6(e,o,e.Duration):o<11&&this.moveTextType4(e,o-4,e.Duration,!0):65===t?o<5&&this.moveTextType1(e,o,e.Duration,!0):70===t?o<4?this.moveTextType7(e,o,e.Duration):o<8?this.moveTextType6(e,o-4,e.Duration,!0):o<13?this.moveTextType0(e,o-8,e.Duration,!0):o<20?this.moveTextType4(e,o-13,e.Duration):o<24?this.moveTextType7(e,o-20,e.Duration,!0):o<29&&this.moveTextType3(e,o-24,e.Duration,!0):71===t?o<4?this.moveTextType7(e,o,e.Duration):o<8?this.moveTextType6(e,o-4,e.Duration,!0):o<13?this.moveTextType0(e,o-8,e.Duration,!0):o<20?this.moveTextType4(e,o-13,e.Duration):o<27&&this.moveTextType5(e,o-20,e.Duration,!0):72===t?o<4?this.moveTextType7(e,o,e.Duration):o<8?this.moveTextType6(e,o-4,e.Duration,!0):o<13&&this.moveTextType1(e,o-8,e.Duration,!0):73===t?o<4?this.moveTextType7(e,o,e.Duration):o<11&&this.moveTextType4(e,o-4,e.Duration,!0):74===t?o<4?this.moveTextType7(e,o,e.Duration):o<11&&this.moveTextType5(e,o-4,e.Duration,!0):75===t?o<5&&this.moveTextType2(e,o,e.Duration,!0):80===t?o<4?this.moveTextType7(e,o,e.Duration,!0):o<9?this.moveTextType3(e,o-4,e.Duration,!0):o<16?this.moveTextType5(e,o-9,e.Duration):o<20?this.moveTextType6(e,o-16,e.Duration,!0):o<25?this.moveTextType0(e,o-20,e.Duration,!0):o<32&&this.moveTextType4(e,o-25,e.Duration):81===t?o<4?this.moveTextType7(e,o,e.Duration,!0):o<9?this.moveTextType3(e,o-4,e.Duration,!0):o<16?this.moveTextType5(e,o-9,e.Duration):o<23&&this.moveTextType4(e,o-16,e.Duration,!0):82===t?o<4?this.moveTextType7(e,o,e.Duration,!0):o<9&&this.moveTextType2(e,o-4,e.Duration,!0):83===t?o<7&&this.moveTextType5(e,o,e.Duration,!0):84===t?o<7&&this.moveTextType4(e,o,e.Duration,!0):90===t?o<4?this.moveTextType6(e,o,e.Duration,!0):o<9?this.moveTextType0(e,o-4,e.Duration,!0):o<16?this.moveTextType4(e,o-9,e.Duration):o<20?this.moveTextType7(e,o-16,e.Duration,!0):o<25?this.moveTextType3(e,o-20,e.Duration,!0):o<32&&this.moveTextType5(e,o-25,e.Duration):91===t?o<4?this.moveTextType6(e,o,e.Duration,!0):o<9?this.moveTextType0(e,o-4,e.Duration,!0):o<16?this.moveTextType4(e,o-9,e.Duration):o<23&&this.moveTextType5(e,o-16,e.Duration,!0):92===t?o<4?this.moveTextType6(e,o,e.Duration,!0):o<9&&this.moveTextType1(e,o-4,e.Duration,!0):(console.log("%c!PhraseNumber error!","color: red"),o<5?this.moveTextType0(e,o,e.Duration):o<9?this.moveTextType6(e,o-5,e.Duration):o<13?this.moveTextType7(e,o-9,e.Duration,!0):o<18?this.moveTextType3(e,o-13,e.Duration,!0):o<25?this.moveTextType5(e,o-18,e.Duration):o<32&&this.moveTextType4(e,o-25,e.Duration,!0))}},{key:"moveTextType0",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i=n?Math.PI*(180+25.2*(5-t)/5)/180:Math.PI*(180+25.2*t/5)/180,this._MoveLyricText.moveTextBasic(e,o,i,{x:.5,y:-.05},{x:1.05,y:.04})}},{key:"moveTextType1",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i=n?Math.PI*(322.8+26.2*t/5)/180:Math.PI*(322.8+26.2*(5-t)/5)/180,this._MoveLyricText.moveTextBasic(e,o,i,{x:-.15,y:0},{x:-.65,y:-.14})}},{key:"moveTextType2",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i=n?Math.PI*(191+26.2*(5-t)/5)/180:Math.PI*(191+26.2*t/5)/180,this._MoveLyricText.moveTextBasic(e,o,i,{x:1.15,y:0},{x:1.65,y:-.14})}},{key:"moveTextType3",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i=n?Math.PI*(334.8+25.2*t/5)/180:Math.PI*(334.8+25.2*(5-t)/5)/180,this._MoveLyricText.moveTextBasic(e,o,i,{x:.5,y:-.05},{x:-.05,y:.04})}},{key:"moveTextType4",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i=n?Math.PI*(202.9+39.1*(7-t)/7)/180:Math.PI*(202.9+39.1*t/7)/180,this._MoveLyricText.moveTextBasic(e,o,i,{x:.5,y:-.05},{x:.9715,y:-.3515})}},{key:"moveTextType5",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i=n?Math.PI*(298+39.1*t/7)/180:Math.PI*(298+39.1*(7-t)/7)/180,this._MoveLyricText.moveTextBasic(e,o,i,{x:.5,y:-.05},{x:.0285,y:-.3515})}},{key:"moveTextType6",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i=n?Math.PI*(249.2+20.8*(4-t)/4)/180:Math.PI*(249.2+20.8*t/4)/180,this._MoveLyricText.moveTextBasic(e,o,i,{x:.5,y:-.05},{x:.5,y:-.469})}},{key:"moveTextType7",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i=n?Math.PI*(270+20.8*t/4)/180:Math.PI*(270+20.8*(4-t)/4)/180,this._MoveLyricText.moveTextBasic(e,o,i,{x:.5,y:-.05},{x:.5,y:-.469})}},{key:"movePhraseText",value:function(e,t,o){this._MoveLyricText.movePhraseText(e,t);var n=e.PhrasePlace,i=e.PhraseCharCount-1;0===n?(o.makeLine(0,i),o.makeLine(6,i-5),o.makeLine(7,i-9,!0),o.makeLine(3,i-13,!0),o.makeLine(5,i-18),o.makeLine(4,i-25,!0)):1===n?(o.makeLine(0,i),o.makeLine(6,i-5),o.makeLine(7,i-9,!0),o.makeLine(3,i-13,!0),o.makeLine(5,i-18),o.makeLine(6,i-25,!0)):2===n?(o.makeLine(0,i),o.makeLine(6,i-5),o.makeLine(5,i-9,!0)):3===n?(o.makeLine(0,i),o.makeLine(6,i-5),o.makeLine(4,i-9,!0)):4===n?(o.makeLine(0,i),o.makeLine(1,i-5,!0)):10===n?(o.makeLine(3,i),o.makeLine(7,i-5),o.makeLine(6,i-9,!0),o.makeLine(0,i-13,!0),o.makeLine(4,i-18),o.makeLine(5,i-25,!0)):11===n?(o.makeLine(3,i),o.makeLine(7,i-5),o.makeLine(6,i-9,!0),o.makeLine(0,i-13,!0),o.makeLine(4,i-18),o.makeLine(7,i-25,!0)):12===n?(o.makeLine(3,i),o.makeLine(7,i-5),o.makeLine(4,i-9,!0)):13===n?(o.makeLine(3,i),o.makeLine(7,i-5),o.makeLine(5,i-9,!0)):14===n?(o.makeLine(3,i),o.makeLine(2,i-5,!0)):20===n?(o.makeLine(1,i),o.makeLine(6,i-5),o.makeLine(7,i-9,!0),o.makeLine(3,i-13,!0),o.makeLine(5,i-18),o.makeLine(4,i-25,!0)):21===n?(o.makeLine(1,i),o.makeLine(6,i-5),o.makeLine(7,i-9,!0),o.makeLine(3,i-13,!0),o.makeLine(5,i-18),o.makeLine(6,i-25,!0)):22===n?(o.makeLine(1,i),o.makeLine(6,i-5),o.makeLine(5,i-9,!0)):23===n?(o.makeLine(1,i),o.makeLine(6,i-5),o.makeLine(4,i-9,!0)):24===n?(o.makeLine(1,i),o.makeLine(0,i-5,!0)):30===n?(o.makeLine(2,i),o.makeLine(7,i-5),o.makeLine(6,i-9,!0),o.makeLine(0,i-13,!0),o.makeLine(4,i-18),o.makeLine(5,i-25,!0)):31===n?(o.makeLine(2,i),o.makeLine(7,i-5),o.makeLine(6,i-9,!0),o.makeLine(0,i-13,!0),o.makeLine(4,i-18),o.makeLine(7,i-25,!0)):32===n?(o.makeLine(2,i),o.makeLine(7,i-5),o.makeLine(4,i-9,!0)):33===n?(o.makeLine(2,i),o.makeLine(7,i-5),o.makeLine(5,i-9,!0)):34===n?(o.makeLine(2,i),o.makeLine(3,i-5,!0)):40===n?(o.makeLine(4,i),o.makeLine(7,i-7,!0),o.makeLine(3,i-11,!0),o.makeLine(5,i-16),o.makeLine(4,i-23,!0)):41===n?(o.makeLine(4,i),o.makeLine(7,i-7,!0),o.makeLine(3,i-11,!0),o.makeLine(5,i-16),o.makeLine(6,i-23,!0)):42===n?(o.makeLine(4,i),o.makeLine(7,i-7,!0),o.makeLine(2,i-11,!0)):43===n?(o.makeLine(4,i),o.makeLine(5,i-7,!0)):50===n?(o.makeLine(5,i),o.makeLine(6,i-7,!0),o.makeLine(0,i-11,!0),o.makeLine(4,i-16),o.makeLine(5,i-23,!0)):51===n?(o.makeLine(5,i),o.makeLine(6,i-7,!0),o.makeLine(0,i-11,!0),o.makeLine(4,i-16),o.makeLine(7,i-23,!0)):52===n?(o.makeLine(5,i),o.makeLine(6,i-7,!0),o.makeLine(1,i-11,!0)):53===n?(o.makeLine(5,i),o.makeLine(4,i-7,!0)):60===n?(o.makeLine(6,i),o.makeLine(7,i-4,!0),o.makeLine(3,i-8,!0),o.makeLine(5,i-13),o.makeLine(6,i-20,!0),o.makeLine(0,i-24,!0)):61===n?(o.makeLine(6,i),o.makeLine(7,i-4,!0),o.makeLine(3,i-8,!0),o.makeLine(5,i-13),o.makeLine(4,i-20,!0)):62===n?(o.makeLine(6,i),o.makeLine(7,i-4,!0),o.makeLine(2,i-8,!0)):63===n?(o.makeLine(6,i),o.makeLine(5,i-4,!0)):64===n?(o.makeLine(6,i),o.makeLine(4,i-4,!0)):65===n?o.makeLine(1,i,!0):70===n?(o.makeLine(7,i),o.makeLine(6,i-4,!0),o.makeLine(0,i-8,!0),o.makeLine(4,i-13),o.makeLine(7,i-20,!0),o.makeLine(3,i-24,!0)):71===n?(o.makeLine(7,i),o.makeLine(6,i-4,!0),o.makeLine(0,i-8,!0),o.makeLine(4,i-13),o.makeLine(5,i-20,!0)):72===n?(o.makeLine(7,i),o.makeLine(6,i-4,!0),o.makeLine(1,i-8,!0)):73===n?(o.makeLine(7,i),o.makeLine(4,i-4,!0)):74===n?(o.makeLine(7,i),o.makeLine(5,i-4,!0)):75===n?o.makeLine(2,i,!0):80===n?(o.makeLine(7,i,!0),o.makeLine(3,i-4,!0),o.makeLine(5,i-9),o.makeLine(6,i-16,!0),o.makeLine(0,i-20,!0),o.makeLine(4,i-25)):81===n?(o.makeLine(7,i,!0),o.makeLine(3,i-4,!0),o.makeLine(5,i-9),o.makeLine(4,i-16,!0)):82===n?(o.makeLine(7,i,!0),o.makeLine(2,i-4,!0)):83===n?o.makeLine(5,i,!0):84===n?o.makeLine(4,i,!0):90===n?(o.makeLine(6,i,!0),o.makeLine(0,i-4,!0),o.makeLine(4,i-9),o.makeLine(7,i-16,!0),o.makeLine(3,i-20,!0),o.makeLine(5,i-25)):91===n?(o.makeLine(6,i,!0),o.makeLine(0,i-4,!0),o.makeLine(4,i-9),o.makeLine(5,i-16,!0)):92===n?(o.makeLine(6,i,!0),o.makeLine(1,i-4,!0)):(o.makeLine(0,i),o.makeLine(6,i-5),o.makeLine(7,i-9,!0),o.makeLine(3,i-13,!0),o.makeLine(5,i-18),o.makeLine(4,i-25,!0))}},{key:"startCharPlace",value:function(e){var t=Math.PI,o={x:0,y:0};return 0===e||4===e?(o.x=1.05+Math.cos(t),o.y=.04+Math.sin(t)):1===e||5===e?(o.x=-.05+Math.cos(0),o.y=.04+Math.sin(0)):2===e?(o.x=-.65+Math.cos(11*t/180),o.y=-.14+Math.sin(11*t/180)):3===e?(o.x=1.65+Math.cos(169*t/180),o.y=-.14+Math.sin(169*t/180)):6===e?(o.x=-.65+Math.cos(37.2*t/180),o.y=-.14+Math.sin(37.2*t/180)):7===e?(o.x=1.65+Math.cos(142.8*t/180),o.y=-.14+Math.sin(142.8*t/180)):(o.x=.5+Math.cos(90*t/180),o.y=-.469+Math.sin(90*t/180)),o}}],o&&W(t.prototype,o),n&&W(t,n),e}();function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t,o){return t&&V(e.prototype,t),o&&V(e,o),e}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function Q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function X(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?U(e):t}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}var $=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=Y(e);if(t){var i=Y(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return X(this,o)}}var te=function(e){return("0000000"+Math.round(e)).slice(-7)},oe=function(e){return("00000"+Math.round(e)).slice(-5)},ne=function(e,t){return Math.floor(Math.random()*(t-e)+e)},ie=function(e){Q(o,e);var t=ee(o);function o(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;J(this,o),(e=t.call(this))._LyricText=null,e._BeatSprite=null,e._ScoreText=null,e.charBuffer=null,e.phraseBuffer=null,e.beatBuffer=null,e._tick=0,e.tickInterval=20,e._MoveTextTypes=null;var i=p.wr,a=p.hr,r=p.textScale;return e.sortableChildren=!0,e.phraseLineNumber=0,e.isGameNow=!1,e.fontLoaded=!1,e._LoadingGame=new x,e._LoadingGame.pivot.set(800,400),e._LoadingGame.position.set(50*i,50*a),e._LoadingGame.scale.set(.08*a),e._LoadingGame.zIndex=1e4,e.addChild(e._LoadingGame),u.ZP.to(e._LoadingGame.loadingCycle,{pixi:{rotation:-359},duration:2,repeat:-1,ease:"none"}),e._Result=new H,e._Result.pivot.set(800,400),e._Result.position.set(50*i,50*a),e._Result.scale.set(.09*a),e._Result.zIndex=9999,e._Result.alpha=0,e._Result.visible=!1,e.addChild(e._Result),e._SomeSprite=new re(n),e._SomeSprite.zIndex=-999,e.addChild(e._SomeSprite),e._TouchLine=new _,e._TouchLine.scale.set(100*i/1920,100*a/1080),e.addChild(e._TouchLine),e.bg=(new s.Graphics).beginFill(0).drawRect(0,0,100*i,100*a).endFill(),e.bg.alpha=0,e.bg.zIndex=-10,e.bg.interactive=!0,e.bg.buttonMode=!1,e.bg.visible=!1,e.addChild(e.bg),e.fakeBG=(new s.Graphics).beginFill(0,.3).drawRect(0,0,100*i,100*a).endFill(),e.fakeBG.zIndex=999,e.addChild(e.fakeBG),e.playButton=s.Sprite.from("gamePlayButton"),e.playButton.anchor.set(.5),e.playButton.position.set(50*i,50*a),e.playButton.scale.set(.03*i),e.playButton.alpha=.5,e.playButton.zIndex=1500,e.playButton.interactive=!0,e.playButton.buttonMode=!0,e.playButton.visible=!1,e.playButton.on("pointertap",e._requestPlay,U(e)),e.addChild(e.playButton),e.pauseButton=s.Sprite.from("gamePauseButton"),e.pauseButton.anchor.set(.5),e.pauseButton.position.set(50*i,2.5*a),e.pauseButton.scale.set(.007*i),e.pauseButton.alpha=.5,e.pauseButton.zIndex=500,e.pauseButton.interactive=!0,e.pauseButton.buttonMode=!0,e.pauseButton.visible=!0,e.pauseButton.on("pointertap",e._requestPause,U(e)),e.addChild(e.pauseButton),e.backToMenu=new s.BitmapText("Back to Menu",{fontName:"BasicRocknRoll",tint:3355443,fontSize:64}),e.backToMenu.anchor.set(.5),e.backToMenu.position.set(50*i,75*a),e.backToMenu.scale.set(1.4*r),e.backToMenu.interactive=!0,e.backToMenu.buttonMode=!0,e.backToMenu.visible=!1,e.backToMenu.on("pointertap",e._backToMenu,U(e)),e.addChild(e.backToMenu),e.SONGURL=n,e.isFirst=!0,e._player=new d.J5({app:{token:"7Mll2OaOc7FrOB1p"},mediaElement:p._media,mediaBannerPosition:null,valenceArousalEnabled:!0,vocalAmplitudeEnabled:!0}),e._player.addListener({onAppReady:function(t){return e._onAppReady(t)},onVideoReady:function(t){return e._onVideoReady(t)},onTimerReady:function(t){return e._onTimerReady(t)},onPlay:function(){return e._onPlay()},onPause:function(){return e._onPause()},onTimeUpdate:function(t){return e._onTimeUpdate(t)}}),e.beatDuration=3e3,e.basedScore=0,e.bonusScore=0,e.beatTouched=!1,e.beatOnce=!1,e.maxCombo=0,e}return q(o,[{key:"_onAppReady",value:function(e){console.log("%c!AppReady","color: aqua"),e.songUrl||(1===this.SONGURL?this._player.createFromSongUrl("https://piapro.jp/t/FDb1/20210213190029",{video:{beatId:3996956,chordId:2130399,repetitiveSegmentId:2099561,lyricId:52065,lyricDiffId:5093}}):2===this.SONGURL?this._player.createFromSongUrl("https://www.youtube.com/watch?v=Se89rQPp5tk",{video:{beatId:3953908,chordId:2130374,repetitiveSegmentId:2099661,lyricId:52061,lyricDiffId:5123}}):3===this.SONGURL?this._player.createFromSongUrl("http://www.youtube.com/watch?v=bMtYf3R0zhY",{video:{beatId:3953902,chordId:2130383,repetitiveSegmentId:2099660,lyricId:52093,lyricDiffId:5177}}):4===this.SONGURL?this._player.createFromSongUrl("https://www.youtube.com/watch?v=3wbZUkPxHEg",{video:{beatId:3953764,chordId:2130372,repetitiveSegmentId:2099662,lyricId:52062,lyricDiffId:5133}}):5===this.SONGURL?this._player.createFromSongUrl("http://www.youtube.com/watch?v=Ch4RQPG1Tmo",{video:{beatId:3953917,chordId:2130385,repetitiveSegmentId:2099665,lyricId:52063,lyricDiffId:5149}}):this._player.createFromSongUrl("https://www.youtube.com/watch?v=pAaD4Hta0ns",{video:{beatId:3953761,chordId:2130375,repetitiveSegmentId:2099586,lyricId:52094,lyricDiffId:5171}})),this._player.volume=50}},{key:"_onVideoReady",value:function(e){var t=this;console.log("%c!VideoReady","color: aqua");for(var o=this._player.findBeat(e.firstPhrase.endTime),n=o;null!==n.next;)n=n.next;this.beatDuration=o.duration,this._BeatSprite=new ue,this._BeatSprite.zIndex=-100,this.addChild(this._BeatSprite),this.maxCombo=e.charCount,this.basedScore=1e6/e.charCount,this.bonusScore=1e4/(n.index+1),this._ScoreText=new se(this.basedScore,this.bonusScore),this.addChild(this._ScoreText),this._MoveTextTypes=new Z(this._ScoreText),this.changeStyle(),setTimeout((function(){t.fontLoad(e.firstPhrase)}),300)}},{key:"_onTimerReady",value:function(e){var t=this;console.log("%c!TimerReady","color: aqua"),setTimeout((function(){t.showStartButton()}),300)}},{key:"showStartButton",value:function(){var e=this;u.ZP.timeline().to(this._LoadingGame.loadingNow,{pixi:{alpha:0},duration:.5}).to(this._LoadingGame.startButton,{pixi:{alpha:1},duration:.5,onComplete:function(){e._LoadingGame.startButton.on("pointertap",e.handleStartButton,e)}})}},{key:"handleStartButton",value:function(){var e=this;this.fontLoaded&&u.ZP.timeline().to([this._LoadingGame,this.fakeBG],{pixi:{alpha:0},duration:.3,onComplete:function(){e.startInitSetting()}})}},{key:"startInitSetting",value:function(){var e=this;u.ZP.killTweensOf(this._LoadingGame),this._LoadingGame.visible=!1,this.fakeBG.visible=!1,this.pauseButton.visible=!0,window.addEventListener("keyup",(function(t){e.keyEvent(t)})),this.bg.on("touchstart",this._beatTocuh,this),p._media.style.visibility="visible",console.log("%c!StartGame","color: aqua"),this.playButton.visible=!0}},{key:"_requestPlay",value:function(){var e=this;this.isFirst&&(this.charBuffer=null,this.phraseBuffer=null,this.beatBuffer=null,this.isFirst=!1),setTimeout((function(){e._player.requestPlay()}),100)}},{key:"_requestPause",value:function(){this._player.requestPause()}},{key:"_onPlay",value:function(){this.isFirst||(console.log("%c!Play","color: aqua"),this.hidePauseScreen(),this.isGameNow=!0,this.bg.visible=!0,this.playButton.visible=!1)}},{key:"_onPause",value:function(){this.isFirst||(console.log("%c!Pause","color: aqua"),this._player.video.endTime<this._player.timer.position?this.handleResultScreen():10<this._player.timer.position&&this.showPauseScreen(),this.isGameNow=!1,this.bg.visible=!1)}},{key:"showPauseScreen",value:function(){this.fakeBG.alpha=1,this.fakeBG.visible=!0,this.playButton.visible=!0,this.backToMenu.visible=!0}},{key:"hidePauseScreen",value:function(){this.fakeBG.visible=!1,this.playButton.visible=!1,this.backToMenu.visible=!1}},{key:"_onTimeUpdate",value:function(e){if(this._LyricText&&this._BeatSprite){var t=this._player.video.findPhrase(e+2e3);if(t&&t!==this.phraseBuffer){var o=this._player.video.findIndex(t),n=this._LyricText.phraseTexts[o];this.showPhrase(n),this.touchLineAnimation(this._TouchLine.children.slice(this.phraseLineNumber),t.duration),this.showStartCharPlace(n.PhrasePlace),this.phraseBuffer=t}var i=this._player.video.findChar(e+1e3);i&&i!==this.charBuffer&&(this.showChar(i),this.charBuffer=i);var a=this._player.findBeat(e);a&&a!==this.beatBuffer&&(this._BeatSprite.newBeat(a.position-1,a.duration),this.beatBuffer=a,this.beatTouched||this.beatOnce||(this._BeatSprite.iloveMiku.alpha=.3),this.beatOnce=!1);var r=a.progress(e);if(.6<r&&r<.8&&(this.beatTouched=!1),this._tick++,this._tick%this.tickInterval===0){var s=!!this._player.findChorus(e+700);this._SomeSprite.showRose(s),this.tickInterval=s?5:ne(13,18),this._tick=0}}}},{key:"showChar",value:function(e){if(this._LyricText&&this._MoveTextTypes){e.previous&&e.previous!==this.charBuffer&&this.showChar(e.previous);var t=this._player.video.findIndex(e),o=this._LyricText.charTextBoxs[t];this._MoveTextTypes.moveCharText(o)}}},{key:"showPhrase",value:function(e){this._MoveTextTypes&&this._MoveTextTypes.movePhraseText(e,this.beatDuration,this._TouchLine)}},{key:"touchLineAnimation",value:function(e,t){this.phraseLineNumber=this._TouchLine.children.length,u.ZP.timeline().to(e,{pixi:{alpha:1},duration:.1,delay:.4,yoyo:!0,repeat:4}).to(e,{pixi:{alpha:.2},duration:1,delay:1}).to(e,{pixi:{alpha:0},duration:.1,delay:(t-1e3)/1e3})}},{key:"showStartCharPlace",value:function(e){if(this._MoveTextTypes){var t=Math.floor(e/10),o=this._MoveTextTypes.startCharPlace(t);o.x*=p.width,o.y*=1920*p.height/1080,this._SomeSprite.showStartCharAnimation(o)}}},{key:"keyEvent",value:function(e){e.preventDefault(),this.isGameNow&&("Space"!==e.code&&" "!==e.key||this._beatTocuh(!0))}},{key:"_beatTocuh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this.isGameNow&&this.beatTouched||!this._BeatSprite)&&this._ScoreText){var t=this._player.timer.position,o=this._player.findBeat(t);if(o){var n=o.progress(t);n<.4||.8<n?(this._BeatSprite.iloveMiku.alpha=1,this._ScoreText.changeBonus(),this.beatTouched=!0,this.beatOnce=!0):e&&(this._BeatSprite.iloveMiku.alpha=.3,this._ScoreText.changeBonus(!0))}}}},{key:"changeStyle",value:function(){var e=80.8*p.wr/2;p.isSafari?p._media.style.left="".concat(e,"px"):p._media.style.transform="translate(-50%, 0%)"}},{key:"fontLoad",value:function(e){var t=this,o=this._player.data.text.replace(/\n/g,"");s.Loader.shared.add({name:"Yusei Magic",url:"https://fonts.googleapis.com/css2?family=Yusei+Magic&display=swap",metadata:{font:{testString:o}}}),s.Loader.shared.onComplete.once((function(){return t.fontLoadEnd(e,o)}),this),s.Loader.shared.load()}},{key:"fontLoadEnd",value:function(e,t){if(this._ScoreText){console.log("%c!fontLoaded","color: red");for(var o=new Array,n=new Array,i=e.firstChar;null!==i;)o.push(this._player.getVocalAmplitude(i.endTime)),n.push(this._player.getValenceArousal(i.endTime)),i=i.next;this._LyricText=new O(this._ScoreText,e,t,o,n,this._player.getMaxVocalAmplitude(),this._player.getMedianValenceArousal()),this.addChild(this._LyricText),this.fontLoaded=!0}}},{key:"_backToMenu",value:function(){window.location.reload()}},{key:"handleResultScreen",value:function(){var e=this;if(this._ScoreText&&this._BeatSprite){p._media.style.visibility="hidden",this._Result.songTitle.text=this._player.data.song.name,this._Result.songArtist.text="- "+this._player.data.song.artist.name,u.ZP.to([this._BeatSprite.iloveMiku,this._ScoreText,this.pauseButton],{pixi:{alpha:0},duration:1}),this._ScoreText.combo>=this.maxCombo||(this._Result.full.visible=!1,this._Result.combo.visible=!1);var t=this._ScoreText.score+this._ScoreText.bonus,o=t/240,n=o;this._Result.visible=!0,u.ZP.timeline().to(this._Result,{pixi:{alpha:1},duration:.5}).to([this._Result.scoreText,this._Result.scoreNumber],{pixi:{alpha:1},duration:.5}),u.ZP.timeline().to(this._Result.scoreNumber,{onUpdate:function(){e._Result.scoreNumber.text=te(n),n+=o},onComplete:function(){e._Result.scoreNumber.text=te(t)},duration:4}).to(this._Result.full,{pixi:{y:400,alpha:1},duration:2,delay:1,ease:"power3"}).to(this._Result.combo,{pixi:{y:400,alpha:1},duration:2,delay:-2,ease:"power3"})}}},{key:"update",value:function(){}},{key:"resize",value:function(){}}]),o}(s.Container),ae=function(){function e(t){J(this,e),this._ScoreText=t,this.basedWidth=1920,this.basedHeight=1080,this.W=p.width,this.H=p.height,this.TR=p.textScale,this.WtoH=p.height*this.basedWidth/this.basedHeight}return q(e,[{key:"moveTextBasic",value:function(e,t,o,n,i){var a=this;e.TextBox.position.set(n.x*this.W,n.y*this.WtoH);var r=u.ZP.timeline();e.TextBox.visible=!0,r.to(e.TextBox,{pixi:{x:(i.x+Math.cos(o))*this.W,y:(i.y-Math.sin(o))*this.WtoH},duration:.7,ease:"none",onComplete:function(){e.Reached=!0}}).to(e.TextBox,{pixi:{alpha:0},duration:.5,delay:(t+150)/1e3,ease:"none",onComplete:function(){e.TextBox.visible=!1,e.Touched||a._ScoreText.cancelCombo()}})}},{key:"movePhraseText",value:function(e,t){var o=e.TextBox,n=e.Duration,i=e.NextDuration,a=e.TextBox.width,r=e.TextBox.height;o.position.set(.5*this.W,.39*this.H);var s=u.ZP.timeline();o.visible=!0,s.to(o,{pixi:{y:"-="+.03*this.H,alpha:1},duration:t/1e3,delay:1.6}).to(o,{pixi:{y:"-="+.05*this.H,width:.5*a,height:.5*r,alpha:.2},duration:t/1e3,delay:(n-t-200)/1e3}).to(o,{pixi:{alpha:0},duration:t/1e3,delay:(i-t)/1e3,onComplete:function(){o.visible=!1}})}}]),e}(),re=function(e){Q(o,e);var t=ee(o);function o(e){var n;J(this,o),(n=t.call(this)).normalRoseNow=0,n.chorusRoseNow=0,n.roseModeBuffer=!1,n.baseW=p.wr,n.baseH=p.hr;var i=p.wr,a=p.hr,r=0;r=5===e?0:3===e||4===e?1:1===e?2:3,n.normalRainVecs=new Array(25);for(var u=0;u<25;u++){var l=ne(40,140);0!==u&&Math.abs(n.normalRainVecs[u]-l)<10&&(l=ne(20,160)),n.normalRainVecs[u]=l}n.chorusRainVecs=new Array(25);for(var c=0;c<25;c++){var h=ne(-70,250);0!==c&&Math.abs(n.chorusRainVecs[c]-h)<10&&(h=ne(-70,250)),n.chorusRainVecs[c]=h}n.flower=s.Texture.from("mainFlower"),n.roseTextures=new Array,n.roseOrange=s.Texture.from("roseOrange"),n.roseTextures.push(n.roseOrange),n.roseSky=s.Texture.from("roseSky"),n.roseTextures.push(n.roseSky),n.roseMelon=s.Texture.from("roseMelon"),n.roseTextures.push(n.roseMelon),n.rosePink=s.Texture.from("rosePink"),n.roseTextures.push(n.rosePink),n.showStartCharFlower=s.Sprite.from(n.flower),n.showStartCharFlower.anchor.set(.5),n.showStartCharFlower.alpha=0,n.showStartCharFlower.scale.set(.06*i),n.addChild(n.showStartCharFlower),n.normalRosesC=new s.Container;for(var d=0;d<25;d++){var f=s.Sprite.from(n.roseTextures[r]);f.anchor.set(.5),f.alpha=.8,f.scale.set(.015*i),f.position.set(10*-i,10*-a),n.normalRosesC.addChild(f)}n.addChild(n.normalRosesC),n.chorusRosesC=new s.Container;for(var m=0;m<25;m++){var y=s.Sprite.from(n.roseTextures[m%4]);y.anchor.set(.5),y.alpha=1,y.scale.set(.015*i),y.position.set(10*-i,10*-a),n.chorusRosesC.addChild(y)}return n.addChild(n.chorusRosesC),n}return q(o,[{key:"showRose",value:function(e){if(this.roseModeBuffer!==e&&this.changeRose(e),e){this.chorusRoseNow++,this.chorusRoseNow>=25&&(this.chorusRoseNow=0);var t=this.chorusRosesC.children[this.chorusRoseNow],o=Math.PI*this.chorusRainVecs[this.chorusRoseNow]/180;u.ZP.killTweensOf(t),t.position.set(50*this.baseW,50*this.baseH),u.ZP.to(t,{pixi:{x:"+="+100*this.baseW*Math.cos(o),y:"+="+100*this.baseH*Math.sin(o),rotation:"-=720"},duration:3,ease:"none"})}else{this.normalRoseNow++,this.normalRoseNow>=25&&(this.normalRoseNow=0);var n=this.normalRosesC.children[this.normalRoseNow],i=Math.PI*this.normalRainVecs[this.normalRoseNow]/180;u.ZP.killTweensOf(n),n.position.set(50*this.baseW,15*-this.baseH),u.ZP.to(n,{pixi:{x:"+="+150*this.baseW*Math.cos(i),y:"+="+150*this.baseH*Math.sin(i),rotation:"-=720"},duration:6,ease:"none"})}}},{key:"changeRose",value:function(e){this.roseModeBuffer=e;var t=this.chorusRosesC,o=this.normalRosesC;e&&(t=this.normalRosesC,o=this.chorusRosesC),u.ZP.to(t,{pixi:{alpha:0},duration:.5}),u.ZP.to(o,{pixi:{alpha:1},duration:.5})}},{key:"showStartCharAnimation",value:function(e){u.ZP.killTweensOf(this.showStartCharFlower),this.showStartCharFlower.alpha=0,this.showStartCharFlower.scale.set(.06*p.wr),this.showStartCharFlower.position.set(e.x,e.y),u.ZP.timeline().to(this.showStartCharFlower,{pixi:{alpha:1.2,scale:0,rotation:"+=400"},duration:2.5})}}]),o}(s.Container),se=function(e){Q(o,e);var t=ee(o);function o(e,n){var i;J(this,o),(i=t.call(this)).normalAddScore=e,i.bonusAddScore=n,i.scoreHR=p.hr;var a=p.wr,r=p.hr,u=p.textScale;return i.score=0,i.combo=0,i.bonus=0,i.scoreText=new s.BitmapText("SCORE",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:48}),i.scoreText.anchor.set(1),i.scoreText.position.set(88*a,97.5*r),i.scoreText.scale.set(u),i.addChild(i.scoreText),i.scoreNumber=new s.BitmapText(te(0),{fontName:"ScoreRocknRoll",tint:11272191,fontSize:48}),i.scoreNumber.anchor.set(1),i.scoreNumber.position.set(101*a,97.5*r),i.scoreNumber.scale.set(u),i.addChild(i.scoreNumber),i.comboText=new s.BitmapText("COMBO",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:32}),i.comboText.anchor.set(1),i.comboText.position.set(96*a,85.5*r),i.comboText.scale.set(u),i.comboText.alpha=0,i.addChild(i.comboText),i.comboNumber=new s.BitmapText("0",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:32}),i.comboNumber.anchor.set(1),i.comboNumber.position.set(100.5*a,85.5*r),i.comboNumber.scale.set(u),i.comboNumber.alpha=0,i.addChild(i.comboNumber),i.bonusText=new s.BitmapText("BONUS",{fontName:"ScoreRocknRoll",tint:11272191,fontSize:48}),i.bonusText.anchor.set(1),i.bonusText.position.set(92*a,91.5*r),i.bonusText.scale.set(u),i.addChild(i.bonusText),i.bonusNumber=new s.BitmapText(oe(0),{fontName:"ScoreRocknRoll",tint:11272191,fontSize:48}),i.bonusNumber.anchor.set(1),i.bonusNumber.position.set(101*a,91.5*r),i.bonusNumber.scale.set(u),i.addChild(i.bonusNumber),i}return q(o,[{key:"changeScore",value:function(){var e=this,t=this.score;this.score+=this.normalAddScore;var o=this.combo;this.combo+=1;var n=this.normalAddScore/60,i=n;if(u.ZP.killTweensOf(this.scoreNumber),this.scoreNumber.text=te(t),u.ZP.to(this.scoreNumber,{onUpdate:function(){e.scoreNumber.text=te(t+i),i+=n},onComplete:function(){e.scoreNumber.text=te(e.score)},duration:1}),this.combo>9){var a=this;u.ZP.killTweensOf(this.comboNumber),this.comboNumber.text=o.toString(),this.comboText.alpha=1,this.comboNumber.alpha=1,this.comboNumber.y=85.5*p.hr,u.ZP.to(this.comboNumber,{pixi:{y:"-="+this.scoreHR,alpha:0},duration:.05,yoyo:!0,repeat:1,onRepeat:function(){a.comboNumber.text=a.combo.toString()},onComplete:function(){a.comboNumber.text=a.combo.toString(),a.comboText.alpha=1,a.comboNumber.alpha=1,a.comboNumber.y=85.5*p.hr}})}}},{key:"changeBonus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,o=this.bonusAddScore;e&&(o*=-.5);var n=this.bonus;this.bonus+=o,this.bonus<0&&(this.bonus=0),u.ZP.killTweensOf(this.bonusNumber),this.bonusNumber.text=oe(n),this.bonusText.alpha=1,this.bonusNumber.alpha=1,this.bonusNumber.y=91.5*p.hr,u.ZP.to(this.bonusNumber,{pixi:{y:"-="+this.scoreHR,alpha:0},duration:.05,yoyo:!0,repeat:1,onRepeat:function(){t.bonusNumber.text=oe(t.bonus)},onComplete:function(){t.bonusNumber.text=oe(t.bonus),t.bonusText.alpha=1,t.bonusNumber.alpha=1,t.bonusNumber.y=91.5*p.hr}})}},{key:"cancelCombo",value:function(){u.ZP.killTweensOf(this.comboNumber),this.combo=0,this.comboText.alpha=0,this.comboNumber.alpha=0}}]),o}(s.Container),ue=function(e){Q(o,e);var t=ee(o);function o(){var e;J(this,o),(e=t.call(this)).basedH=p.hr;var n=p.wr,i=p.hr;p.textScale;e.sortableChildren=!0,e.iloveMiku=new s.Container,e.dancingMiku=new Array;var a=s.Sprite.from("leftMiku");a.anchor.set(.5),a.scale.set(.018*n),a.position.set(50*n,63*i),a.alpha=0,e.iloveMiku.addChild(a),e.dancingMiku.push(a);var r=s.Sprite.from("centerMiku");r.anchor.set(.49,.49),r.scale.set(.018*n),r.position.set(50*n,63*i),r.alpha=1,e.iloveMiku.addChild(r),e.dancingMiku.push(r);var u=s.Sprite.from("rightMiku");u.anchor.set(.5),u.scale.set(.018*n),u.position.set(50*n,63*i),u.alpha=0,e.iloveMiku.addChild(u),e.dancingMiku.push(u),e.dancingMiku.push(r),e.iloveMiku.alpha=.3,e.addChild(e.iloveMiku),e.mikuTypeBuffer=1,e.beatLight=(new s.Graphics).beginFill(5241823).drawRect(0,90*i,100*n,80*i).endFill(),e.beatLight.zIndex=-100;var l=new s.filters.BlurFilter;return l.blur=40,e.beatLight.filters=[l],e.beatLight.alpha=.6,e.addChild(e.beatLight),e}return q(o,[{key:"newBeat",value:function(e,t){var o=this;u.ZP.timeline().to(this.dancingMiku[this.mikuTypeBuffer],{pixi:{y:51*this.basedH,alpha:0},duration:t/8e3}).to(this.dancingMiku[e],{pixi:{y:63*this.basedH,alpha:1},duration:t/8e3,onComplete:function(){o.mikuTypeBuffer=e}})}}]),o}(s.Container);function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t,o){return t&&he(e.prototype,t),o&&he(e,o),e}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function fe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function me(e,t){return!t||"object"!==Te(t)&&"function"!==typeof t?le(e):t}function ye(e,t){return ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ye(e,t)}var Te=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=de(e);if(t){var i=de(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return me(this,o)}}var xe=0,ge=function(){xe>0&&clearTimeout(xe),xe=window.setTimeout((function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);p._onResize(e,t)}),300)},be=function(e,t){return Math.floor(Math.random()*(t-e)+e)},ke=function(e){fe(o,e);var t=ve(o);function o(){var e;ce(this,o),(e=t.call(this)).songSelectURL=1,e._tick=0,e.tickInterval=60,e.loadEnd=!1;var n=p.wr,i=p.hr;e.sortableChildren=!0,window.addEventListener("resize",ge),e._Buttons=new we,e.addChild(e._Buttons);var a=Math.max(screen.availWidth,document.documentElement.clientWidth),r=Math.max(screen.availHeight,document.documentElement.clientHeight),u=Math.max(a,r)+200;return e.BG=(new s.Graphics).beginFill(0,.3).drawRect(0,0,u,u).endFill(),e.BG.pivot.set(u/2,u/2),e.BG.position.set(50*n,50*i),e.BG.interactive=!0,e.BG.visible=!1,e.addChild(e.BG),e._BackGround=new Se,e._BackGround.pivot.set(50*n,50*i),e._BackGround.position.set(50*n,50*i),e._BackGround.zIndex=-1e4,e.addChild(e._BackGround),e._CreditScreen=new Be,e._CreditScreen.pivot.set(800,400),e._CreditScreen.position.set(50*n,50*i),e._CreditScreen.scale.set(.07*i),e._CreditScreen.alpha=0,e._CreditScreen.visible=!1,e._CreditScreen.interactive=!0,e.addChild(e._CreditScreen),e._Buttons.song1Button.on("pointertap",(function(){return e.selectSong(1)}),le(e)),e._Buttons.song2Button.on("pointertap",(function(){return e.selectSong(2)}),le(e)),e._Buttons.song3Button.on("pointertap",(function(){return e.selectSong(3)}),le(e)),e._Buttons.song4Button.on("pointertap",(function(){return e.selectSong(4)}),le(e)),e._Buttons.song5Button.on("pointertap",(function(){return e.selectSong(5)}),le(e)),e._Buttons.song6Button.on("pointertap",(function(){return e.selectSong(6)}),le(e)),e._Buttons.playButton.on("pointertap",e.handlePlayButton,le(e)),e._Buttons.creditButton.on("pointertap",e.showCredit,le(e)),e.BG.on("pointertap",e.hideCredit,le(e)),e.loadGameMenu(),e}return pe(o,[{key:"loadGameMenu",value:function(){var e=this,t=p.wr;u.ZP.timeline().to(this._Buttons.song1Button,{pixi:{x:77*t},duration:2,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song2Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song3Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song4Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song5Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)"}).to(this._Buttons.song6Button,{pixi:{x:80*t},duration:2,delay:-1.8,ease:"elastic.out(1, 0.4)",onComplete:function(){e.loadEnd=!0}})}},{key:"selectSong",value:function(e){var t=p.wr;this.songSelectURL=e;for(var o=0;o<6;o++)this._Buttons.songButtons[o].alpha=.5,this._Buttons.songButtons[o].x=80*t;this._Buttons.songButtons[e-1].alpha=1,this._Buttons.songButtons[e-1].x=77*t}},{key:"showCredit",value:function(){this.BG.visible=!0,this._CreditScreen.visible=!0,this._CreditScreen.alpha=1}},{key:"hideCredit",value:function(){this.BG.visible=!1,this._CreditScreen.visible=!1,this._CreditScreen.alpha=0}},{key:"handlePlayButton",value:function(){var e=this;this._Buttons.playButton.interactive=!1,window.removeEventListener("resize",ge),u.ZP.to(this,{pixi:{alpha:0},duration:.5,onComplete:function(){return p.changeScene(new ie(e.songSelectURL))}})}},{key:"update",value:function(){this._tick++,this._tick%this.tickInterval===0&&(this._BackGround.rainRose(),this.tickInterval=be(30,80),this._tick=0)}},{key:"resize",value:function(){if(this.loadEnd){var e=p.wr,t=p.hr,o=e/25;this.BG.position.set(50*e,50*t),this._CreditScreen.position.set(50*e,50*t),this._CreditScreen.scale.set(.07*t),this._Buttons.title.position.set(25*e,43*t),this._Buttons.title.scale.set(1.3*o),this._Buttons.playButton.position.set(86*e,90*t),this._Buttons.playButton.scale.set(o),this._Buttons.creditButton.position.set(59*e,90*t),this._Buttons.creditButton.scale.set(o),this._Buttons.song1Button.position.set(80*e,11*t),this._Buttons.song1Button.scale.set(o),this._Buttons.song2Button.position.set(80*e,23*t),this._Buttons.song2Button.scale.set(o),this._Buttons.song3Button.position.set(80*e,35*t),this._Buttons.song3Button.scale.set(o),this._Buttons.song4Button.position.set(80*e,47*t),this._Buttons.song4Button.scale.set(o),this._Buttons.song5Button.position.set(80*e,59*t),this._Buttons.song5Button.scale.set(o),this._Buttons.song6Button.position.set(80*e,71*t),this._Buttons.song6Button.scale.set(o),this._BackGround.position.set(50*e,50*t),this.selectSong(this.songSelectURL)}}}]),o}(s.Container),Be=function(e){fe(o,e);var t=ve(o);function o(){var e;return ce(this,o),(e=t.call(this)).frame=s.Sprite.from("frame"),e.addChild(e.frame),e.creditTitle=new s.BitmapText("Credit",{fontName:"BasicRocknRoll",tint:0,fontSize:112}),e.creditTitle.anchor.set(.5),e.creditTitle.position.set(800,130),e.addChild(e.creditTitle),e.credit1=new s.BitmapText("Plan&Program:huskyB4ll",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.credit1.anchor.set(.5),e.credit1.position.set(800,260),e.addChild(e.credit1),e.credit2=new s.BitmapText("Cheering Miku Picture:\u306d\u3053\u307f\u3093(@nukotun)   Menu&Result Graphic:\u3064\u307c(@tsubo_pi)",{fontName:"BasicRocknRoll",tint:0,fontSize:32}),e.credit2.anchor.set(.5),e.credit2.position.set(800,330),e.addChild(e.credit2),e.specialTitle=new s.BitmapText("Special Thanks",{fontName:"BasicRocknRoll",tint:0,fontSize:112}),e.specialTitle.anchor.set(.5),e.specialTitle.position.set(800,456),e.addChild(e.specialTitle),e.SP1=new s.BitmapText("All Vocaloid fans",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.SP1.anchor.set(.5),e.SP1.position.set(800,590),e.addChild(e.SP1),e.SP2=new s.BitmapText("You",{fontName:"BasicRocknRoll",tint:0,fontSize:48}),e.SP2.anchor.set(.5),e.SP2.position.set(800,655),e.addChild(e.SP2),e}return o}(s.Container),we=function(e){fe(o,e);var t=ve(o);function o(){var e;ce(this,o),e=t.call(this);var n=p.wr,i=p.hr,a=n/25;return e.title=s.Sprite.from("title"),e.title.anchor.set(.5),e.title.position.set(25*n,43*i),e.title.scale.set(1.3*a),e.addChild(e.title),e.playButton=s.Sprite.from("titlePlayButton"),e.playButton.anchor.set(.5),e.playButton.position.set(86*n,90*i),e.playButton.scale.set(a),e.playButton.interactive=!0,e.playButton.buttonMode=!0,e.addChild(e.playButton),e.creditButton=s.Sprite.from("titleCreditButton"),e.creditButton.anchor.set(.5),e.creditButton.position.set(59*n,90*i),e.creditButton.scale.set(a),e.creditButton.interactive=!0,e.creditButton.buttonMode=!0,e.addChild(e.creditButton),e.songButtons=new Array,e.song1Button=s.Sprite.from("songTitle1"),e.song1Button.anchor.set(.5),e.song1Button.position.set(130*n,11*i),e.song1Button.scale.set(a),e.song1Button.alpha=1,e.song1Button.interactive=!0,e.song1Button.buttonMode=!0,e.addChild(e.song1Button),e.songButtons.push(e.song1Button),e.song2Button=s.Sprite.from("songTitle2"),e.song2Button.anchor.set(.5),e.song2Button.position.set(130*n,23*i),e.song2Button.scale.set(a),e.song2Button.alpha=.5,e.song2Button.interactive=!0,e.song2Button.buttonMode=!0,e.addChild(e.song2Button),e.songButtons.push(e.song2Button),e.song3Button=s.Sprite.from("songTitle3"),e.song3Button.anchor.set(.5),e.song3Button.position.set(130*n,35*i),e.song3Button.scale.set(a),e.song3Button.alpha=.5,e.song3Button.interactive=!0,e.song3Button.buttonMode=!0,e.addChild(e.song3Button),e.songButtons.push(e.song3Button),e.song4Button=s.Sprite.from("songTitle4"),e.song4Button.anchor.set(.5),e.song4Button.position.set(130*n,47*i),e.song4Button.scale.set(a),e.song4Button.alpha=.5,e.song4Button.interactive=!0,e.song4Button.buttonMode=!0,e.addChild(e.song4Button),e.songButtons.push(e.song4Button),e.song5Button=s.Sprite.from("songTitle5"),e.song5Button.anchor.set(.5),e.song5Button.position.set(130*n,59*i),e.song5Button.scale.set(a),e.song5Button.alpha=.5,e.song5Button.interactive=!0,e.song5Button.buttonMode=!0,e.addChild(e.song5Button),e.songButtons.push(e.song5Button),e.song6Button=s.Sprite.from("songTitle6"),e.song6Button.anchor.set(.5),e.song6Button.position.set(130*n,71*i),e.song6Button.scale.set(a),e.song6Button.alpha=.5,e.song6Button.interactive=!0,e.song6Button.buttonMode=!0,e.addChild(e.song6Button),e.songButtons.push(e.song6Button),e}return o}(s.Container),Se=function(e){fe(o,e);var t=ve(o);function o(){var e;ce(this,o),(e=t.call(this)).roseNow=0,e.baseW=p.wr,e.baseH=p.hr;var n=p.wr,i=p.hr,a=100*n/15;e.rainPlace=new Array(30);for(var r=0;r<30;r++){var u=be(a,20*a);0!==r&&Math.abs(e.rainPlace[r]-u)<a&&(u=be(a,20*a)),e.rainPlace[r]=u}e.basicRose=s.Texture.from("rosePink"),e.roses=new Array;for(var l=0;l<30;l++){var c=s.Sprite.from(e.basicRose);c.anchor.set(.5),c.alpha=.8,c.scale.set(.015*n),c.position.set(10*-n,10*-i),e.addChild(c),e.roses.push(c)}return e}return pe(o,[{key:"rainRose",value:function(){this.roseNow++,this.roseNow>=30&&(this.roseNow=0);var e=this.roses[this.roseNow];u.ZP.killTweensOf(e),e.position.set(this.rainPlace[this.roseNow],20*-this.baseH),u.ZP.to(e,{pixi:{x:"-="+30*this.baseW,y:"+="+140*this.baseH,rotation:"-=720"},duration:10,ease:"none"})}}]),o}(s.Container);function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}function Re(e,t){return!t||"object"!==Me(t)&&"function"!==typeof t?_e(e):t}function De(e,t){return De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},De(e,t)}var Me=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=Ce(e);if(t){var i=Ce(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return Re(this,o)}}var Ne=0,Oe=function(){Ne>0&&clearTimeout(Ne),Ne=window.setTimeout((function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);p._onResize(e,t)}),300)},Ie=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(a,e);var t,o,n,i=Pe(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this);var t=p.wr,o=p.hr,n=p.textScale;return window.addEventListener("resize",Oe),e.suggestText1=new s.BitmapText("\u6a2a\u753b\u9762\u63a8\u5968\u3067\u3059",{fontName:"BasicRocknRoll",tint:0,fontSize:64}),e.suggestText1.anchor.set(.5),e.suggestText1.position.set(50*t,40*o),e.suggestText1.scale.set(2*n),e.addChild(e.suggestText1),e.suggestText2=new s.BitmapText("please play the game in landscape mode",{fontName:"BasicRocknRoll",tint:0,fontSize:64}),e.suggestText2.anchor.set(.5),e.suggestText2.position.set(50*t,50*o),e.suggestText2.scale.set(n),e.addChild(e.suggestText2),e.suggestText3=new s.BitmapText("\u30d1\u30bd\u30b3\u30f3\u306e\u5834\u5408\u306f\u753b\u9762\u3092\u6a2a\u306b\u9577\u304f\u3057\u3066\u304b\u3089\u904a\u3093\u3067\u304f\u3060\u3055\u3044",{fontName:"BasicRocknRoll",tint:7368816,fontSize:72}),e.suggestText3.anchor.set(.5),e.suggestText3.position.set(50*t,60*o),e.suggestText3.scale.set(n),e.addChild(e.suggestText3),e.continueButton=new s.BitmapText("> Continue <",{fontName:"BasicRocknRoll",tint:7368816,fontSize:64}),e.continueButton.anchor.set(.5),e.continueButton.position.set(50*t,80*o),e.continueButton.scale.set(n),e.continueButton.alpha=0,e.continueButton.interactive=!0,e.continueButton.buttonMode=!0,e.continueButton.on("pointertap",e.goGameMenuScene,_e(e)),e.addChild(e.continueButton),u.ZP.to(e.continueButton,{pixi:{alpha:1},duration:.2,delay:1.5}),e}return t=a,(o=[{key:"goGameMenuScene",value:function(){this.continueButton.interactive=!1,window.removeEventListener("resize",Oe),u.ZP.to(this,{pixi:{alpha:0},duration:.5,onComplete:function(){return p.changeScene(new ke)}})}},{key:"update",value:function(){}},{key:"resize",value:function(){var e=p.wr,t=p.hr,o=p.textScale;this.suggestText1.position.set(50*e,37*t),this.suggestText1.scale.set(1.6*o),this.suggestText2.position.set(50*e,50*t),this.suggestText2.scale.set(.8*o),this.suggestText3.position.set(50*e,60*t),this.suggestText3.scale.set(.8*o),this.continueButton.position.set(50*e,80*t),this.continueButton.scale.set(.8*o)}}])&&Le(t.prototype,o),n&&Le(t,n),a}(s.Container),Ee=JSON.parse('{"C":["0123456789","abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ",".,:-_=+!&#@()~<>? "],"f":["\u6a2a\u753b\u9762\u63a8\u5968\u3067\u3059","\u30d1\u30bd\u30b3\u30f3\u306e\u5834\u5408\u306f\u753b\u9762\u3092\u6a2a\u306b\u9577\u304f\u3057\u3066\u304b\u3089\u904a\u3093\u3067\u304f\u3060\u3055\u3044","\u306d\u3053\u307f\u3093","\u3064\u307c","\u6b4c\u8a5e\u304c\u7dda\u306e\u3068\u3053\u308d\u307e\u3067\u6765\u305f\u3089\u30bf\u30a4\u30df\u30f3\u30b0\u826f\u304f\u306a\u305e\u308d\u3046\uff01","\u30d3\u30fc\u30c8\u306b\u5408\u308f\u305b\u3066","\u30b9\u30da\u30fc\u30b9\u30ad\u30fc\u3092\u62bc\u3059\u3068 / \u4ed6\u306e\u6307\u3067\u753b\u9762\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068","\u5f97\u70b9\u30a2\u30c3\u30d7\uff01","\u5618\u3082\u672c\u5f53\u3082\u541b\u3060\u304b\u3089-\u771f\u5cf6\u3086\u308d","\u305d\u306e\u5fc3\u306b\u706f\u308b\u8272\u306f-\u30e9\u30c6\u30eb\u30cd","\u590f\u3092\u306a\u305e\u3063\u3066-\u30b7\u30ed\u30af\u30de\u6d88\u3057\u30b4\u30e0","\u5bc6\u304b\u306a\u308b\u4ea4\u4fe1\u66f2-\u6fc1\u8336"]}'),Ge=[{name:"RocknRoll One",url:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap",metadata:{font:{testString:Ee.C.join("")+Ee.f.join("")}}},{name:"fontText",url:"Texts/FontPreloadingText.json"},{name:"leftMiku",url:"DancingMiku/left.png"},{name:"rightMiku",url:"DancingMiku/right.png"},{name:"centerMiku",url:"DancingMiku/center.png"},{name:"mainFlower",url:"Shapes/mainFlower.png"},{name:"frame",url:"Shapes/frame.png"},{name:"roseOrange",url:"Shapes/rose1.png"},{name:"roseSky",url:"Shapes/rose2.png"},{name:"roseMelon",url:"Shapes/rose3.png"},{name:"rosePink",url:"Shapes/rose4.png"},{name:"titlePlayButton",url:"TitleMaterials/playButton.png"},{name:"titleCreditButton",url:"TitleMaterials/creditButton.png"},{name:"title",url:"TitleMaterials/title.png"},{name:"songTitle1",url:"TitleMaterials/songTitle1.png"},{name:"songTitle2",url:"TitleMaterials/songTitle2.png"},{name:"songTitle3",url:"TitleMaterials/songTitle3.png"},{name:"songTitle4",url:"TitleMaterials/songTitle4.png"},{name:"songTitle5",url:"TitleMaterials/songTitle5.png"},{name:"songTitle6",url:"TitleMaterials/songTitle6.png"},{name:"loopBack",url:"Shapes/cycle.svg"},{name:"gamePlayButton",url:"Shapes/play.svg"},{name:"gamePauseButton",url:"Shapes/pause.svg"},{name:"resultText",url:"Shapes/resultText.png"},{name:"twitterLogo",url:"Shapes/twitter.png"}];function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function He(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}function We(e,t){return!t||"object"!==Ue(t)&&"function"!==typeof t?je(e):t}function Ze(e,t){return Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ze(e,t)}var Ue=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=Ae(e);if(t){var i=Ae(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return We(this,o)}}var Ve=function(e){He(a,e);var t,o,n,i=Je(a);function a(){var e;ze(this,a),e=i.call(this);var t=p.wr,o=p.hr,n=p.textScale;return s.utils.destroyTextureCache(),e.sortableChildren=!0,e.tick=0,e.loadingText=new s.Text("Loading.",{fontFamily:"RocknRoll One",fill:0,fontSize:64}),e.loadingText.resolution=2,e.loadingText.anchor.y=.5,e.loadingText.position.set(35*t,50*o),e.loadingText.scale.set(2*n),e.loadingText.zIndex=100,e.addChild(e.loadingText),e._LoadingFlower=new qe,e._LoadingFlower.position.set(50*t,50*o),e._LoadingFlower.scale.set(t<o?.15*o:.1*t),e._LoadingFlower.alpha=.5,e.addChild(e._LoadingFlower),s.Loader.shared.add(Ge),s.Loader.shared.onProgress.add(e.downloadProgress,je(e)),s.Loader.shared.onComplete.once(e.gameLoaded,je(e)),s.Loader.shared.onError.once(e.errorHandle,je(e)),s.Loader.shared.load(),e}return t=a,(o=[{key:"downloadProgress",value:function(e){this._LoadingFlower.flowermask.y=-4*e.progress}},{key:"gameLoaded",value:function(){this.initSetting(),this._LoadingFlower.flowermask.visible=!1,u.p8.to(this,{pixi:{alpha:0},duration:.5,delay:.2,onComplete:this.changeScene})}},{key:"errorHandle",value:function(){setTimeout((function(){void 0!==window?window.location.reload():location.reload()}),1e3)}},{key:"initSetting",value:function(){var e=2;s.utils.isMobile.any&&(e=1),s.BitmapFont.from("BasicRocknRoll",{fontFamily:"RocknRoll One",fill:"#ffffff",fontSize:96},{resolution:e,chars:s.Loader.shared.resources.fontText.data.required.join("")+s.Loader.shared.resources.fontText.data.text.join("")}),s.BitmapFont.from("ScoreRocknRoll",{fontFamily:"RocknRoll One",fontSize:96,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#05ffff"],stroke:"#4a1850",strokeThickness:3,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:4,wordWrap:!0,wordWrapWidth:440,lineJoin:"round"},{resolution:e,chars:s.Loader.shared.resources.fontText.data.required.join("")}),s.BitmapFont.from("FullComboRocknRoll",{fontFamily:"RocknRoll One",fontSize:96,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#e6c422"],stroke:"#ffa200",strokeThickness:2,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowDistance:4,lineJoin:"round"},{resolution:e,chars:"FULLCOMBO"})}},{key:"changeScene",value:function(){Math.max(document.documentElement.clientWidth,window.innerWidth||0)<Math.max(document.documentElement.clientHeight,window.innerHeight||0)?p.changeScene(new Ie):p.changeScene(new ke)}},{key:"update",value:function(){this.tick+=1,90===this.tick&&(this.tick=0),this.tick<30?this.loadingText.text="Loading.":this.tick<60?this.loadingText.text="Loading..":this.loadingText.text="Loading..."}},{key:"resize",value:function(){}}])&&Fe(t.prototype,o),n&&Fe(t,n),a}(s.Container),qe=function(e){He(o,e);var t=Je(o);function o(){var e;return ze(this,o),(e=t.call(this)).flower=s.Texture.from("DancingMiku/loadResultMiku.png"),e.flowerSprite=s.Sprite.from(e.flower),e.addChild(e.flowerSprite),e.flowerBGSprite=s.Sprite.from(e.flower),e.addChild(e.flowerBGSprite),e.flowermask=(new s.Graphics).beginFill(0,1).drawRect(0,0,400,400).endFill(),e.addChild(e.flowermask),e.flowermask.mask=e.flowerBGSprite,e.pivot.set(200,200),e}return o}(s.Container),Ye=function(){var e=(0,i.useRef)(null),t=(0,i.useRef)(null);return(0,i.useEffect)((function(){var o=e.current,n=t.current;if(o&&n){r().clear();var i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0);p.initialize(o,n,i,a);var s=new Ve;p.changeScene(s)}}),[e,t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("canvas",{ref:e}),(0,n.jsxs)("button",{type:"button",id:"dummyButton",onClick:function(e){e.preventDefault(),e.currentTarget.style.display="none",setTimeout((function(){e.target.style.display="none"}),100)},children:["Please",(0,n.jsx)("br",{}),"Touch Display",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}),(0,n.jsx)("div",{ref:t,id:"media"})]})}}}]);